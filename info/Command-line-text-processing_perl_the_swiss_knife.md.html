





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-521cbf980c80.css" integrity="sha512-Uhy/mAyAx1HfsenmjQ85ASpOk5bjt2Ay03pNeixXIvkHlEm5S+N4u0HWfDGhvsGYx4bGyviXWGGPZeIffqYcNA==" media="all" rel="stylesheet" />
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-b5aaea3557bf.css" integrity="sha512-tarqNVe/BUUdu+2IPP7ELoJbVpfvnbvxHVQ+1QeiLHSP/WzQXttdlvVeAZDpueAcaZvJqSS4OlkGCfcQWeQ99w==" media="all" rel="stylesheet" />
  
  
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-e1e1bc98a53e.css" integrity="sha512-4eG8mKU+R9QAnMQwfSIgbo24hS+nUXxSuUs5G5LMQw+5wjC1TSKfgxJb2j61PXya94+wMwN1OT7r7MF5rbdUvw==" media="all" rel="stylesheet" />
  

  <meta name="viewport" content="width=device-width">
  
  <title>Command-line-text-processing/perl_the_swiss_knife.md at master · learnbyexample/Command-line-text-processing · GitHub</title>
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta content="https://avatars3.githubusercontent.com/u/17766317?s=400&amp;v=4" property="og:image" /><meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="learnbyexample/Command-line-text-processing" property="og:title" /><meta content="https://github.com/learnbyexample/Command-line-text-processing" property="og:url" /><meta content="Command-line-text-processing - :zap: From finding text to search and replace, from sorting to beautifying text and more :art:" property="og:description" />

  <link rel="assets" href="https://assets-cdn.github.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="A45A:38E3:1A9410F:2DB4AF9:5A869011" data-pjax-transient>
  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
    <meta name="google-analytics" content="UA-3769691-2">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="github" name="octolytics-app-id" /><meta content="https://collector.githubapp.com/github-external/browser_event" name="octolytics-event-url" /><meta content="A45A:38E3:1A9410F:2DB4AF9:5A869011" name="octolytics-dimension-request_id" /><meta content="iad" name="octolytics-dimension-region_edge" /><meta content="iad" name="octolytics-dimension-region_render" />
<meta content="https://github.com/hydro_browser_events" name="hydro-events-url" />
<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location" />




  <meta class="js-ga-set" name="dimension1" content="Logged Out">


  

      <meta name="hostname" content="github.com">
  <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="N2MzOTVlY2FiY2I3YWIzOTI5ZmQ3MDQwMDY3NmViOGI0ZjFiNjVlMTdmMDJlMmVhZTUwZjY0N2RiZGMzZGVjYnx7InJlbW90ZV9hZGRyZXNzIjoiMjQuNTQuMTcuMjE0IiwicmVxdWVzdF9pZCI6IkE0NUE6MzhFMzoxQTk0MTBGOjJEQjRBRjk6NUE4NjkwMTEiLCJ0aW1lc3RhbXAiOjE1MTg3NjgxNDUsImhvc3QiOiJnaXRodWIuY29tIn0=">

    <meta name="enabled-features" content="UNIVERSE_BANNER,FREE_TRIALS,MARKETPLACE_HERO_CARD_UPLOADER,MARKETPLACE_INSIGHTS,MARKETPLACE_INSIGHTS_CONVERSION_PERCENTAGES">

  <meta name="html-safe-nonce" content="bcbabf013f4354a3d512e8d6bdaf51252f109995">

  <meta http-equiv="x-pjax-version" content="2978c8d5521dccd5d1e06acd304d2d41">
  

      <link href="https://github.com/learnbyexample/Command-line-text-processing/commits/master.atom" rel="alternate" title="Recent Commits to Command-line-text-processing:master" type="application/atom+xml">

  <meta name="description" content="Command-line-text-processing - :zap: From finding text to search and replace, from sorting to beautifying text and more :art:">
  <meta name="go-import" content="github.com/learnbyexample/Command-line-text-processing git https://github.com/learnbyexample/Command-line-text-processing.git">

  <meta content="17766317" name="octolytics-dimension-user_id" /><meta content="learnbyexample" name="octolytics-dimension-user_login" /><meta content="86132832" name="octolytics-dimension-repository_id" /><meta content="learnbyexample/Command-line-text-processing" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="86132832" name="octolytics-dimension-repository_network_root_id" /><meta content="learnbyexample/Command-line-text-processing" name="octolytics-dimension-repository_network_root_nwo" /><meta content="false" name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" />


    <link rel="canonical" href="https://github.com/learnbyexample/Command-line-text-processing/blob/master/perl_the_swiss_knife.md" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">


  <meta name="u2f-support" content="true">

<link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-out env-production page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="px-2 py-4 show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        <header class="Header header-logged-out  position-relative f4 py-3" role="banner">
  <div class="container-lg d-flex px-3">
    <div class="d-flex flex-justify-between flex-items-center">
      <a class="header-logo-invertocat my-0" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
        <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
      </a>

    </div>

    <div class="HeaderMenu HeaderMenu--bright d-flex flex-justify-between flex-auto">
        <nav class="mt-0">
          <ul class="d-flex list-style-none">
              <li class="ml-2">
                <a href="/features" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:features" data-selected-links="/features /features/project-management /features/code-review /features/project-management /features/integrations /features">
                  Features
</a>              </li>
              <li class="ml-4">
                <a href="/business" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/security /business/customers /business">
                  Business
</a>              </li>

              <li class="ml-4">
                <a href="/explore" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore">
                  Explore
</a>              </li>

              <li class="ml-4">
                    <a href="/marketplace" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:marketplace" data-selected-links=" /marketplace">
                      Marketplace
</a>              </li>
              <li class="ml-4">
                <a href="/pricing" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:pricing" data-selected-links="/pricing /pricing/developer /pricing/team /pricing/business-hosted /pricing/business-enterprise /pricing">
                  Pricing
</a>              </li>
          </ul>
        </nav>

      <div class="d-flex">
          <div class="d-lg-flex flex-items-center mr-3">
            <div class="header-search scoped-search site-scoped-search js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/learnbyexample/Command-line-text-processing/search" class="js-site-search-form" data-scoped-search-url="/learnbyexample/Command-line-text-processing/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
    <label class="form-control header-search-wrapper js-chromeless-input-container">
        <a href="/learnbyexample/Command-line-text-processing/blob/master/perl_the_swiss_knife.md" class="header-search-scope no-underline">This repository</a>
      <input type="text"
        class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable"
        data-hotkey="s"
        name="q"
        value=""
        placeholder="Search"
        aria-label="Search this repository"
        data-unscoped-placeholder="Search GitHub"
        data-scoped-placeholder="Search"
        autocapitalize="off">
        <input type="hidden" class="js-site-search-type-field" name="type" >
    </label>
</form></div>

          </div>

        <span class="d-inline-block">
            <div class="HeaderNavlink px-0 py-2 m-0">
              <a class="text-bold text-white no-underline" href="/login?return_to=%2Flearnbyexample%2FCommand-line-text-processing%2Fblob%2Fmaster%2Fperl_the_swiss_knife.md" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
                <span class="text-gray">or</span>
                <a class="text-bold text-white no-underline" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
            </div>
        </span>
      </div>
    </div>
  </div>
</header>

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main" class="application-main ">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container >
      






  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
      <a href="/login?return_to=%2Flearnbyexample%2FCommand-line-text-processing"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
    Watch
  </a>
  <a class="social-count" href="/learnbyexample/Command-line-text-processing/watchers"
     aria-label="194 users are watching this repository">
    194
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Flearnbyexample%2FCommand-line-text-processing"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"/></svg>
    Star
  </a>

    <a class="social-count js-social-count" href="/learnbyexample/Command-line-text-processing/stargazers"
      aria-label="5910 users starred this repository">
      5,910
    </a>

  </li>

  <li>
      <a href="/login?return_to=%2Flearnbyexample%2FCommand-line-text-processing"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
        Fork
      </a>

    <a href="/learnbyexample/Command-line-text-processing/network" class="social-count"
       aria-label="328 users forked this repository">
      328
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a href="/learnbyexample" class="url fn" rel="author">learnbyexample</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/learnbyexample/Command-line-text-processing" data-pjax="#js-repo-pjax-container">Command-line-text-processing</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/learnbyexample/Command-line-text-processing" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /learnbyexample/Command-line-text-processing" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a href="/learnbyexample/Command-line-text-processing/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /learnbyexample/Command-line-text-processing/issues" itemprop="url">
        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">3</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/learnbyexample/Command-line-text-processing/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls checks /learnbyexample/Command-line-text-processing/pulls" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">3</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a href="/learnbyexample/Command-line-text-processing/projects" class="js-selected-navigation-item reponav-item" data-hotkey="g b" data-selected-links="repo_projects new_repo_project repo_project /learnbyexample/Command-line-text-processing/projects">
      <svg aria-hidden="true" class="octicon octicon-project" height="16" version="1.1" viewBox="0 0 15 16" width="15"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >0</span>
</a>


  <a href="/learnbyexample/Command-line-text-processing/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /learnbyexample/Command-line-text-processing/pulse">
    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  <a href="/learnbyexample/Command-line-text-processing/blob/34146f4a0b6f01d51c681791b0b97824cc2b9833/perl_the_swiss_knife.md" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a>

  <!-- blob contrib key: blob_contributors:v21:5ddbdfa6befd658b20fb3767849f6bf3 -->

  <div class="file-navigation js-zeroclipboard-container">
    
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class=" btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w"
    
    type="button" aria-label="Switch branches or tags" aria-expanded="false" aria-haspopup="true">
      <i>Branch:</i>
      <span class="js-select-button css-truncate-target">master</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax>

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open selected"
               href="/learnbyexample/Command-line-text-processing/blob/master/perl_the_swiss_knife.md"
               data-name="master"
               data-skip-pjax="true"
               rel="nofollow">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>

    <div class="BtnGroup float-right">
      <a href="/learnbyexample/Command-line-text-processing/find/master"
            class="js-pjax-capture-input btn btn-sm BtnGroup-item"
            data-pjax
            data-hotkey="t">
        Find file
      </a>
      <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm BtnGroup-item tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button>
    </div>
    <div class="breadcrumb js-zeroclipboard-target">
      <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/learnbyexample/Command-line-text-processing" data-pjax="true"><span>Command-line-text-processing</span></a></span></span><span class="separator">/</span><strong class="final-path">perl_the_swiss_knife.md</strong>
    </div>
  </div>


  
  <div class="commit-tease">
      <span class="float-right">
        <a class="commit-tease-sha" href="/learnbyexample/Command-line-text-processing/commit/954c0fbb07b41c8b0e115fe89634b4d40eb9f57a" data-pjax>
          954c0fb
        </a>
        <relative-time datetime="2018-01-25T04:32:05Z">Jan 25, 2018</relative-time>
      </span>
      <div>
        <img alt="@learnbyexample" class="avatar" height="20" src="https://avatars3.githubusercontent.com/u/17766317?s=40&amp;v=4" width="20" />
        <a href="/learnbyexample" class="user-mention" rel="author">learnbyexample</a>
          <a href="/learnbyexample/Command-line-text-processing/commit/954c0fbb07b41c8b0e115fe89634b4d40eb9f57a" class="message" data-pjax="true" title="link corrections, ex for split in list context">link corrections, ex for split in list context</a>
      </div>

    <div class="commit-tease-contributors">
      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box">
        <strong>1</strong>
         contributor
      </button>
      
    </div>

    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list" data-facebox-id="facebox-description">
          <li class="facebox-user-list-item">
            <img alt="@learnbyexample" height="24" src="https://avatars2.githubusercontent.com/u/17766317?s=48&amp;v=4" width="24" />
            <a href="/learnbyexample">learnbyexample</a>
          </li>
      </ul>
    </div>
  </div>


  <div class="file">
    <div class="file-header">
  <div class="file-actions">

    <div class="BtnGroup">
      <a href="/learnbyexample/Command-line-text-processing/raw/master/perl_the_swiss_knife.md" class="btn btn-sm BtnGroup-item" id="raw-url">Raw</a>
        <a href="/learnbyexample/Command-line-text-processing/blame/master/perl_the_swiss_knife.md" class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b">Blame</a>
      <a href="/learnbyexample/Command-line-text-processing/commits/master/perl_the_swiss_knife.md" class="btn btn-sm BtnGroup-item" rel="nofollow">History</a>
    </div>


        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw"
          aria-label="You must be signed in to make or propose changes">
          <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
        </button>
        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw"
          aria-label="You must be signed in to make or propose changes">
          <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"/></svg>
        </button>
  </div>

  <div class="file-info">
      3039 lines (2451 sloc)
      <span class="file-info-divider"></span>
    85.3 KB
  </div>
</div>

    
  <div id="readme" class="readme blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="text"><h1><a href="#perl-one-liners" aria-hidden="true" class="anchor" id="user-content-perl-one-liners"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-perl-one-liners"></a>Perl one liners</h1>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#executing-perl-code">Executing Perl code</a></li>
<li><a href="#simple-search-and-replace">Simple search and replace</a>
<ul>
<li><a href="#inplace-editing">inplace editing</a></li>
</ul>
</li>
<li><a href="#line-filtering">Line filtering</a>
<ul>
<li><a href="#regular-expressions-based-filtering">Regular expressions based filtering</a></li>
<li><a href="#fixed-string-matching">Fixed string matching</a></li>
<li><a href="#line-number-based-filtering">Line number based filtering</a></li>
</ul>
</li>
<li><a href="#field-processing">Field processing</a>
<ul>
<li><a href="#field-comparison">Field comparison</a></li>
<li><a href="#specifying-different-input-field-separator">Specifying different input field separator</a></li>
<li><a href="#specifying-different-output-field-separator">Specifying different output field separator</a></li>
</ul>
</li>
<li><a href="#changing-record-separators">Changing record separators</a>
<ul>
<li><a href="#input-record-separator">Input record separator</a></li>
<li><a href="#output-record-separator">Output record separator</a></li>
</ul>
</li>
<li><a href="#multiline-processing">Multiline processing</a></li>
<li><a href="#perl-regular-expressions">Perl regular expressions</a>
<ul>
<li><a href="#sed-vs-perl-subtle-differences">sed vs perl subtle differences</a></li>
<li><a href="#backslash-sequences">Backslash sequences</a></li>
<li><a href="#non-greedy-quantifier">Non-greedy quantifier</a></li>
<li><a href="#lookarounds">Lookarounds</a></li>
<li><a href="#ignoring-specific-matches">Ignoring specific matches</a></li>
<li><a href="#special-capture-groups">Special capture groups</a></li>
<li><a href="#modifiers">Modifiers</a></li>
<li><a href="#quoting-metacharacters">Quoting metacharacters</a></li>
<li><a href="#matching-position">Matching position</a></li>
</ul>
</li>
<li><a href="#using-modules">Using modules</a></li>
<li><a href="#two-file-processing">Two file processing</a>
<ul>
<li><a href="#comparing-whole-lines">Comparing whole lines</a></li>
<li><a href="#comparing-specific-fields">Comparing specific fields</a></li>
<li><a href="#line-number-matching">Line number matching</a></li>
</ul>
</li>
<li><a href="#creating-new-fields">Creating new fields</a></li>
<li><a href="#dealing-with-duplicates">Dealing with duplicates</a></li>
<li><a href="#lines-between-two-regexps">Lines between two REGEXPs</a>
<ul>
<li><a href="#all-unbroken-blocks">All unbroken blocks</a></li>
<li><a href="#specific-blocks">Specific blocks</a></li>
<li><a href="#broken-blocks">Broken blocks</a></li>
</ul>
</li>
<li><a href="#array-operations">Array operations</a>
<ul>
<li><a href="#iteration-and-filtering">Iteration and filtering</a></li>
<li><a href="#sorting">Sorting</a></li>
<li><a href="#transforming">Transforming</a></li>
</ul>
</li>
<li><a href="#miscellaneous">Miscellaneous</a>
<ul>
<li><a href="#split">split</a></li>
<li><a href="#fixed-width-processing">Fixed width processing</a></li>
<li><a href="#string-and-file-replication">String and file replication</a></li>
<li><a href="#executing-external-commands">Executing external commands</a></li>
</ul>
</li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
<br>
<div class="highlight highlight-source-shell"><pre>$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print $^V<span class="pl-pds">'</span></span>
v5.22.1

$ man perl
PERL(1)                Perl Programmers Reference Guide                PERL(1)

NAME
       perl - The Perl 5 language interpreter

SYNOPSIS
       perl [ <span class="pl-k">-s</span>TtuUWX ]      [ <span class="pl-k">-h</span>v ] [ -V[:configvar] ]
            [ <span class="pl-k">-c</span>w ] [ <span class="pl-k">-d</span>[t][:debugger] ] [ -D[number/list] ]
            [ <span class="pl-k">-p</span>na ] [ -Fpattern ] [ -l[octal] ] [ -0[octal/hexadecimal] ]
            [ -Idir ] [ -m[-]module ] [ -M[-]<span class="pl-s"><span class="pl-pds">'</span>module...<span class="pl-pds">'</span></span> ] [ <span class="pl-k">-f</span> ]
            [ -C [number/list] ]      [ <span class="pl-k">-S</span> ]      [ <span class="pl-k">-x</span>[dir] ]
            [ -i[extension] ]
            [ [-e<span class="pl-k">|</span>-E] <span class="pl-s"><span class="pl-pds">'</span>command<span class="pl-pds">'</span></span> ] [ -- ] [ programfile ] [ argument ]...

       For more information on these options, you can run <span class="pl-s"><span class="pl-pds">"</span>perldoc perlrun<span class="pl-pds">"</span></span>.
...</pre></div>
<p><strong>Prerequisites and notes</strong></p>
<ul>
<li>familiarity with programming concepts like variables, printing, control structures, arrays, etc</li>
<li>Perl borrows syntax/features from <strong>C, shell scripting, awk, sed</strong> etc. Prior experience working with them would help a lot</li>
<li>familiarity with regular expression basics
<ul>
<li>if not, check out <strong>ERE</strong> portion of <a href="/learnbyexample/Command-line-text-processing/blob/master/gnu_sed.md#regular-expressions">GNU sed regular expressions</a></li>
<li>examples for non-greedy, lookarounds, etc will be covered here</li>
</ul>
</li>
<li>this tutorial is primarily focussed on short programs that are easily usable from command line, similar to using <code>grep</code>, <code>sed</code>, <code>awk</code> etc
<ul>
<li>do NOT use style/syntax presented here when writing full fledged Perl programs which should use <strong>strict, warnings</strong> etc</li>
<li>see <a href="https://perldoc.perl.org/perlintro.html" rel="nofollow">perldoc - perlintro</a> and <a href="https://learnxinyminutes.com/docs/perl/" rel="nofollow">learnxinyminutes - perl</a> for quick intro to using Perl for full fledged programs</li>
</ul>
</li>
<li>links to Perl documentation will be added as necessary</li>
<li>unless otherwise specified, consider input as ASCII encoded text only
<ul>
<li>see also <a href="https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default" rel="nofollow">stackoverflow - why UTF-8 is not default</a></li>
</ul>
</li>
</ul>
<br>
<h2><a href="#executing-perl-code" aria-hidden="true" class="anchor" id="user-content-executing-perl-code"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-executing-perl-code"></a>Executing Perl code</h2>
<ul>
<li>One way is to put code in a file and use <code>perl</code> command with filename as argument</li>
<li>Another is to use <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)" rel="nofollow">shebang</a> at beginning of script, make the file executable and directly run it</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat code.pl
print <span class="pl-s"><span class="pl-pds">"</span>Hello Perl\n<span class="pl-pds">"</span></span>
$ perl code.pl
Hello Perl

$ <span class="pl-c"><span class="pl-c">#</span> similar to bash</span>
$ cat code.sh
<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Hello Bash<span class="pl-pds">'</span></span>
$ bash code.sh
Hello Bash</pre></div>
<ul>
<li>For short programs, one can use <code>-e</code> commandline option to provide code from command line itself
<ul>
<li>Use <code>-E</code> option to use newer features like <code>say</code>. See <a href="https://perldoc.perl.org/feature.html" rel="nofollow">perldoc - new features</a></li>
</ul>
</li>
<li>This entire chapter is about using <code>perl</code> this way from commandline</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -e <span class="pl-s"><span class="pl-pds">'</span>print "Hello Perl\n"<span class="pl-pds">'</span></span>
Hello Perl

$ <span class="pl-c"><span class="pl-c">#</span> say automatically adds newline character</span>
$ perl -E <span class="pl-s"><span class="pl-pds">'</span>say "Hello Perl"<span class="pl-pds">'</span></span>
Hello Perl

$ <span class="pl-c"><span class="pl-c">#</span> similar to</span>
$ bash -c <span class="pl-s"><span class="pl-pds">'</span>echo "Hello Bash"<span class="pl-pds">'</span></span>
Hello Bash

$ <span class="pl-c"><span class="pl-c">#</span> multiple commands can be issued separated by ;</span>
$ <span class="pl-c"><span class="pl-c">#</span> -l will be covered later, here used to append newline to print</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$x=25; $y=12; print $x**$y<span class="pl-pds">'</span></span>
59604644775390625</pre></div>
<ul>
<li>Perl is (in)famous for being able to things more than one way</li>
<li>examples in this chapter will mostly try to use the syntax that avoids <code>(){}</code></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> shows different syntax usage of if/say/print</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>if(2&lt;3){print("2 is less than 3\n")}<span class="pl-pds">'</span></span>
2 is less than 3
$ perl -E <span class="pl-s"><span class="pl-pds">'</span>say "2 is less than 3" if 2&lt;3<span class="pl-pds">'</span></span>
2 is less than 3

$ <span class="pl-c"><span class="pl-c">#</span> string comparison uses eq for ==, lt for &lt; and so on</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>if("a" lt "b"){$x=5; $y=10} print "x=$x; y=$y\n"<span class="pl-pds">'</span></span>
x=5<span class="pl-k">;</span> y=10
$ <span class="pl-c"><span class="pl-c">#</span> x/y assignment will happen only if condition evaluates to true</span>
$ perl -E <span class="pl-s"><span class="pl-pds">'</span>say "x=$x; y=$y" if "a" lt "b" and $x=5,$y=10<span class="pl-pds">'</span></span>
x=5<span class="pl-k">;</span> y=10

$ <span class="pl-c"><span class="pl-c">#</span> variables will be interpolated within double quotes</span>
$ <span class="pl-c"><span class="pl-c">#</span> so, use q operator if single quoting is needed</span>
$ <span class="pl-c"><span class="pl-c">#</span> as single quote is already being used to group perl code for -e option</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print "ab $x 123"<span class="pl-pds">'</span></span>
ab  123
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print q/ab $x 123/<span class="pl-pds">'</span></span>
ab <span class="pl-smi">$x</span> 123</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><code>perl -h</code> for summary of options</li>
<li><a href="https://perldoc.perl.org/perlrun.html#Command-Switches" rel="nofollow">perldoc - Command Switches</a></li>
<li><a href="https://perldoc.perl.org/perlop.html" rel="nofollow">perldoc - Perl operators and precedence</a></li>
<li><a href="https://explainshell.com/explain?cmd=perl+-F+-l+-anpeE+-i+-0+-M" rel="nofollow">explainshell</a> - to quickly get information without having to traverse through the docs</li>
<li>See <a href="#changing-record-separators">Changing record separators</a> section for more details on <code>-l</code> option</li>
</ul>
<br>
<h2><a href="#simple-search-and-replace" aria-hidden="true" class="anchor" id="user-content-simple-search-and-replace"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-simple-search-and-replace"></a>Simple search and replace</h2>
<ul>
<li><strong>substitution</strong> command syntax is very similar to <code>sed</code> for search and replace
<ul>
<li>syntax is <code>variable =~ s/REGEXP/REPLACEMENT/FLAGS</code> and by default acts on <code>$_</code> if variable is not specified</li>
<li>see <a href="https://perldoc.perl.org/perlvar.html#SPECIAL-VARIABLES" rel="nofollow">perldoc - SPECIAL VARIABLES</a> for explanation on <code>$_</code> and other such special variables</li>
<li>more detailed examples will be covered in later sections</li>
</ul>
</li>
<li>Just like other text processing commands, <code>perl</code> will automatically loop over input line by line when <code>-n</code> or <code>-p</code> option is used
<ul>
<li>like <code>sed</code>, the <code>-n</code> option won't print the record</li>
<li><code>-p</code> will print the record, including any changes made</li>
<li>newline character being default record separator</li>
<li><code>$_</code> will contain the input record content, including the record separator (unlike <code>sed</code> and <code>awk</code>)</li>
<li>any directory name appearing in file arguments passed will be automatically ignored</li>
</ul>
</li>
<li>and similar to other commands, <code>perl</code> will work with both stdin and file input
<ul>
<li>See other chapters for examples of <a href="/learnbyexample/Command-line-text-processing/blob/master/miscellaneous.md#seq">seq</a>, <a href="/learnbyexample/Command-line-text-processing/blob/master/restructure_text.md#paste">paste</a>, etc</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> sample stdin data</span>
$ seq 10 <span class="pl-k">|</span> paste -sd,
1,2,3,4,5,6,7,8,9,10

$ <span class="pl-c"><span class="pl-c">#</span> change only first ',' to ' : '</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: sed 's/,/ : /'</span>
$ seq 10 <span class="pl-k">|</span> paste -sd, <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/,/ : /<span class="pl-pds">'</span></span>
1 <span class="pl-c1">:</span> 2,3,4,5,6,7,8,9,10

$ <span class="pl-c"><span class="pl-c">#</span> change all ',' to ' : ' by using 'g' modifier</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: sed 's/,/ : /g'</span>
$ seq 10 <span class="pl-k">|</span> paste -sd, <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/,/ : /g<span class="pl-pds">'</span></span>
1 <span class="pl-c1">:</span> 2 <span class="pl-c1">:</span> 3 <span class="pl-c1">:</span> 4 <span class="pl-c1">:</span> 5 <span class="pl-c1">:</span> 6 <span class="pl-c1">:</span> 7 <span class="pl-c1">:</span> 8 <span class="pl-c1">:</span> 9 <span class="pl-c1">:</span> 10

$ cat greeting.txt
Hi there
Have a nice day
$ <span class="pl-c"><span class="pl-c">#</span> same as: sed 's/nice day/safe journey/' greeting.txt</span>
$ perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/nice day/safe journey/<span class="pl-pds">'</span></span> greeting.txt
Hi there
Have a safe journey</pre></div>
<br>
<h4><a href="#inplace-editing" aria-hidden="true" class="anchor" id="user-content-inplace-editing"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-inplace-editing"></a>inplace editing</h4>
<ul>
<li>similar to <a href="/learnbyexample/Command-line-text-processing/blob/master/gnu_sed.md#prefix-backup-name">GNU sed - using * with inplace option</a>, one can also use <code>*</code> to either prefix the backup name or place the backup files in another existing directory</li>
<li>See also <a href="https://www.effectiveperlprogramming.com/2017/12/in-place-editing-gets-safer-in-v5-28/" rel="nofollow">effectiveperlprogramming - caveats of using -i option</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: sed -i.bkp 's/Hi/Hello/' greeting.txt</span>
$ perl -i.bkp -pe <span class="pl-s"><span class="pl-pds">'</span>s/Hi/Hello/<span class="pl-pds">'</span></span> greeting.txt
$ <span class="pl-c"><span class="pl-c">#</span> original file gets preserved in 'greeting.txt.bkp'</span>
$ cat greeting.txt
Hello there
Have a nice day

$ <span class="pl-c"><span class="pl-c">#</span> using -i'bkp.*' will save backup file as 'bkp.greeting.txt'</span>

$ <span class="pl-c"><span class="pl-c">#</span> use empty argument to -i with caution, changes made cannot be undone</span>
$ perl -i -pe <span class="pl-s"><span class="pl-pds">'</span>s/nice day/safe journey/<span class="pl-pds">'</span></span> greeting.txt
$ cat greeting.txt
Hello there
Have a safe journey</pre></div>
<ul>
<li>Multiple input files are treated individually and changes are written back to respective files</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat f1
I ate 3 apples
$ cat f2
I bought two bananas and 3 mangoes

$ perl -i.bkp -pe <span class="pl-s"><span class="pl-pds">'</span>s/3/three/<span class="pl-pds">'</span></span> f1 f2
$ cat f1
I ate three apples
$ cat f2
I bought two bananas and three mangoes</pre></div>
<br>
<h2><a href="#line-filtering" aria-hidden="true" class="anchor" id="user-content-line-filtering"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-line-filtering"></a>Line filtering</h2>
<br>
<h4><a href="#regular-expressions-based-filtering" aria-hidden="true" class="anchor" id="user-content-regular-expressions-based-filtering"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-regular-expressions-based-filtering"></a>Regular expressions based filtering</h4>
<ul>
<li>syntax is <code>variable =~ m/REGEXP/FLAGS</code> to check for a match
<ul>
<li><code>variable !~ m/REGEXP/FLAGS</code> for negated match</li>
<li>by default acts on <code>$_</code> if variable is not specified</li>
</ul>
</li>
<li>as we need to print only selective lines, use <code>-n</code> option
<ul>
<li>by default, contents of <code>$_</code> will be printed if no argument is passed to <code>print</code></li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat poem.txt
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.

$ <span class="pl-c"><span class="pl-c">#</span> same as: grep '^[RS]' or sed -n '/^[RS]/p' or awk '/^[RS]/'</span>
$ <span class="pl-c"><span class="pl-c">#</span> /^[RS]/ is shortcut for $_ =~ m/^[RS]/</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if /^[RS]/<span class="pl-pds">'</span></span> poem.txt
Roses are red,
Sugar is sweet,

$ <span class="pl-c"><span class="pl-c">#</span> same as: grep -i 'and' poem.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if /and/i<span class="pl-pds">'</span></span> poem.txt
And so are you.

$ <span class="pl-c"><span class="pl-c">#</span> same as: grep -v 'are' poem.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> !/are/ is shortcut for $_ !~ m/are/</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if !/are/<span class="pl-pds">'</span></span> poem.txt
Sugar is sweet,

$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/are/ &amp;&amp; !/so/' poem.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if /are/ &amp;&amp; !/so/<span class="pl-pds">'</span></span> poem.txt
Roses are red,
Violets are blue,</pre></div>
<ul>
<li>using different delimiter</li>
<li>quoting from <a href="https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators" rel="nofollow">perldoc - Regexp Quote-Like Operators</a></li>
</ul>
<blockquote>
<p>With the m you can use any pair of non-alphanumeric, non-whitespace characters as delimiters</p>
</blockquote>
<div class="highlight highlight-source-shell"><pre>$ cat paths.txt
/foo/a/report.log
/foo/y/power.log
/foo/abc/errors.log

$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if /\/foo\/a\//<span class="pl-pds">'</span></span> paths.txt
/foo/a/report.log

$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if m#/foo/a/#<span class="pl-pds">'</span></span> paths.txt
/foo/a/report.log

$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if !m#/foo/a/#<span class="pl-pds">'</span></span> paths.txt
/foo/y/power.log
/foo/abc/errors.log</pre></div>
<br>
<h4><a href="#fixed-string-matching" aria-hidden="true" class="anchor" id="user-content-fixed-string-matching"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-fixed-string-matching"></a>Fixed string matching</h4>
<ul>
<li>similar to <code>grep -F</code> and <code>awk index</code></li>
<li>See also
<ul>
<li><a href="https://perldoc.perl.org/functions/index.html" rel="nofollow">perldoc - index function</a></li>
<li><a href="https://perldoc.perl.org/5.8.8/perlop.html#Quote-and-Quote-like-Operators" rel="nofollow">perldoc - Quote and Quote-like Operators</a></li>
<li><a href="#quoting-metacharacters">Quoting metacharacters</a> section</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: grep -F 'a[5]' or awk 'index($0, "a[5]")'</span>
$ <span class="pl-c"><span class="pl-c">#</span> index returns matching position(starts at 0) and -1 if not found</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>int a[5]<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if index($_, "a[5]") != -1<span class="pl-pds">'</span></span>
int a[5]

$ <span class="pl-c"><span class="pl-c">#</span> however, string within double quotes gets interpolated, for ex</span>
$ x=<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span><span class="pl-k">;</span> <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$x</span><span class="pl-pds">"</span></span>
123
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>$x=123; print "$x\n"<span class="pl-pds">'</span></span>
123

$ <span class="pl-c"><span class="pl-c">#</span> so, for commandline usage, better to pass string as environment variable</span>
$ <span class="pl-c"><span class="pl-c">#</span> they are accessible via the %ENV hash variable</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print $ENV{PWD}<span class="pl-pds">'</span></span>
/home/learnbyexample
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print $ENV{SHELL}<span class="pl-pds">'</span></span>
/bin/bash

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a#$%d<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if index($_, "#$%") != -1<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a#$%d<span class="pl-pds">'</span></span> <span class="pl-k">|</span> s=<span class="pl-s"><span class="pl-pds">'</span>#$%<span class="pl-pds">'</span></span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if index($_, $ENV{s}) != -1<span class="pl-pds">'</span></span>
a#$%d</pre></div>
<ul>
<li>return value is useful to match at specific position</li>
<li>for ex: at start/end of line</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat eqns.txt
a=b,a-b=c,c<span class="pl-k">*</span>d
a+b,pi=3.14,5e12
i<span class="pl-k">*</span>(t+9-g)/8,4-a+b

$ <span class="pl-c"><span class="pl-c">#</span> start of line</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: s='a+b' awk 'index($0, ENVIRON["s"])==1' eqns.txt</span>
$ s=<span class="pl-s"><span class="pl-pds">'</span>a+b<span class="pl-pds">'</span></span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if index($_, $ENV{s})==0<span class="pl-pds">'</span></span> eqns.txt
a+b,pi=3.14,5e12

$ <span class="pl-c"><span class="pl-c">#</span> end of line</span>
$ <span class="pl-c"><span class="pl-c">#</span> length function returns number of characters, by default acts on $_</span>
$ s=<span class="pl-s"><span class="pl-pds">'</span>a+b<span class="pl-pds">'</span></span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>$pos = length() - length($ENV{s}) - 1;</span>
<span class="pl-s">                    print if index($_, $ENV{s}) == $pos<span class="pl-pds">'</span></span> eqns.txt
i<span class="pl-k">*</span>(t+9-g)/8,4-a+b</pre></div>
<br>
<h4><a href="#line-number-based-filtering" aria-hidden="true" class="anchor" id="user-content-line-number-based-filtering"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-line-number-based-filtering"></a>Line number based filtering</h4>
<ul>
<li>special variable <code>$.</code> contains total records read so far, similar to <code>NR</code> in <code>awk</code>
<ul>
<li>But no equivalent of awk's <code>FNR</code>, <a href="https://stackoverflow.com/questions/12384692/line-number-of-a-file-in-perl" rel="nofollow">see this stackoverflow Q&amp;A for workaround</a></li>
</ul>
</li>
<li>See also <a href="https://perldoc.perl.org/perlfunc.html#eof" rel="nofollow">perldoc - eof</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: head -n2 poem.txt | tail -n1</span>
$ <span class="pl-c"><span class="pl-c">#</span> or sed -n '2p' or awk 'NR==2'</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $.==2<span class="pl-pds">'</span></span> poem.txt
Violets are blue,

$ <span class="pl-c"><span class="pl-c">#</span> print 2nd and 4th line</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: sed -n '2p; 4p' or awk 'NR==2 || NR==4'</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $.==2 || $.==4<span class="pl-pds">'</span></span> poem.txt
Violets are blue,
And so are you.

$ <span class="pl-c"><span class="pl-c">#</span> same as: tail -n1 poem.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> or sed -n '$p' or awk 'END{print}'</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if eof<span class="pl-pds">'</span></span> poem.txt
And so are you.</pre></div>
<ul>
<li>for large input, use <code>exit</code> to avoid unnecessary record processing</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -ne 'print and exit if $.==234'</span>
$ seq 14323 14563435 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>if($.==234){print; exit}<span class="pl-pds">'</span></span>
14556

$ <span class="pl-c"><span class="pl-c">#</span> sample time comparison</span>
$ <span class="pl-k">time</span> seq 14323 14563435 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>if($.==234){print; exit}<span class="pl-pds">'</span></span> <span class="pl-k">&gt;</span> /dev/null
real    0m0.005s
$ <span class="pl-k">time</span> seq 14323 14563435 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $.==234<span class="pl-pds">'</span></span> <span class="pl-k">&gt;</span> /dev/null
real    0m2.439s

$ <span class="pl-c"><span class="pl-c">#</span> mimicking head command, same as: head -n3 or sed '3q'</span>
$ seq 14 25 <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>exit if $.&gt;3<span class="pl-pds">'</span></span>
14
15
16

$ <span class="pl-c"><span class="pl-c">#</span> same as: sed '3Q'</span>
$ seq 14 25 <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>exit if $.==3<span class="pl-pds">'</span></span>
14
15</pre></div>
<ul>
<li>selecting range of lines</li>
<li><code>..</code> is <a href="https://perldoc.perl.org/perlop.html#Range-Operators" rel="nofollow">perldoc - range operator</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: sed -n '3,5p' or awk 'NR&gt;=3 &amp;&amp; NR&lt;=5'</span>
$ <span class="pl-c"><span class="pl-c">#</span> in this context, the range is compared against $.</span>
$ seq 14 25 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if 3..5<span class="pl-pds">'</span></span>
16
17
18

$ <span class="pl-c"><span class="pl-c">#</span> selecting from particular line number to end of input</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: sed -n '10,$p' or awk 'NR&gt;=10'</span>
$ seq 14 25 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $.&gt;=10<span class="pl-pds">'</span></span>
23
24
25</pre></div>
<br>
<h2><a href="#field-processing" aria-hidden="true" class="anchor" id="user-content-field-processing"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-field-processing"></a>Field processing</h2>
<ul>
<li><code>-a</code> option will auto-split each input record based on one or more continuous white-space, similar to default behavior in <code>awk</code>
<ul>
<li>See also <a href="#split">split</a> section</li>
</ul>
</li>
<li>Special variable array <code>@F</code> will contain all the elements, indexing starts from 0
<ul>
<li>negative indexing is also supported, <code>-1</code> gives last element, <code>-2</code> gives last-but-one and so on</li>
<li>see <a href="#array-operations">Array operations</a> section for examples on array usage</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat fruits.txt
fruit   qty
apple   42
banana  31
fig     90
guava   6

$ <span class="pl-c"><span class="pl-c">#</span> print only first field, indexing starts from 0</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '{print $1}' fruits.txt </span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[0]<span class="pl-pds">'</span></span> fruits.txt
fruit
apple
banana
fig
guava

$ <span class="pl-c"><span class="pl-c">#</span> print only second field</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '{print $2}' fruits.txt </span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span> fruits.txt
qty
42
31
90
6</pre></div>
<ul>
<li>by default, leading and trailing whitespaces won't be considered when splitting the input record
<ul>
<li>mimicking <code>awk</code>'s default behavior</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span> a    ate b\tc   \n<span class="pl-pds">'</span></span>
 a    ate b     c
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span> a    ate b\tc   \n<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[0]<span class="pl-pds">'</span></span>
a
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span> a    ate b\tc   \n<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[-1]<span class="pl-pds">'</span></span>
c

$ <span class="pl-c"><span class="pl-c">#</span> number of fields, $#F gives index of last element - so add 1</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>1 a 7<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $#F+1<span class="pl-pds">'</span></span>
3
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span> a    ate b\tc   \n<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $#F+1<span class="pl-pds">'</span></span>
4
$ <span class="pl-c"><span class="pl-c">#</span> or use scalar context</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>1 a 7<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print scalar @F<span class="pl-pds">'</span></span>
3</pre></div>
<br>
<h4><a href="#field-comparison" aria-hidden="true" class="anchor" id="user-content-field-comparison"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-field-comparison"></a>Field comparison</h4>
<ul>
<li>for numeric context, Perl automatically tries to convert the string to number, ignoring white-space</li>
<li>for string comparison, use <code>eq</code> for <code>==</code>, <code>ne</code> for <code>!=</code> and so on</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> if first field exactly matches the string 'apple'</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '$1=="apple"{print $2}' fruits.txt</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1] if $F[0] eq "apple"<span class="pl-pds">'</span></span> fruits.txt
42

$ <span class="pl-c"><span class="pl-c">#</span> print first field if second field &gt; 35 (excluding header)</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR&gt;1 &amp;&amp; $2&gt;35{print $1}' fruits.txt </span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[0] if $F[1]&gt;35 &amp;&amp; $.&gt;1<span class="pl-pds">'</span></span> fruits.txt
apple
fig

$ <span class="pl-c"><span class="pl-c">#</span> print header and lines with qty &lt; 35</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==1 || $2&lt;35' fruits.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if $F[1]&lt;35 || $.==1<span class="pl-pds">'</span></span> fruits.txt
fruit   qty
banana  31
guava   6

$ <span class="pl-c"><span class="pl-c">#</span> if first field does NOT contain 'a'</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '$1 !~ /a/' fruits.txt </span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if $F[0] !~ /a/<span class="pl-pds">'</span></span> fruits.txt
fruit   qty
fig     90</pre></div>
<br>
<h4><a href="#specifying-different-input-field-separator" aria-hidden="true" class="anchor" id="user-content-specifying-different-input-field-separator"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-specifying-different-input-field-separator"></a>Specifying different input field separator</h4>
<ul>
<li>by using <code>-F</code> command line option
<ul>
<li>See also <a href="#split">split</a> section, which covers details about trailing empty fields</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> second field where input field separator is :</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -F: '{print $2}'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
123

$ <span class="pl-c"><span class="pl-c">#</span> last field, same as: awk -F: '{print $NF}'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[-1]<span class="pl-pds">'</span></span>
789
$ <span class="pl-c"><span class="pl-c">#</span> second last field, same as: awk -F: '{print $(NF-1)}'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[-2]<span class="pl-pds">'</span></span>
bar

$ <span class="pl-c"><span class="pl-c">#</span> second and last field</span>
$ <span class="pl-c"><span class="pl-c">#</span> other ways to print more than 1 element will be covered later</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print "$F[1] $F[-1]"<span class="pl-pds">'</span></span>
123 789

$ <span class="pl-c"><span class="pl-c">#</span> use quotes to avoid clashes with shell special characters</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>one;two;three;four<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>;<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[2]<span class="pl-pds">'</span></span>
three</pre></div>
<ul>
<li>Regular expressions based input field separator</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -F'[0-9]+' '{print $2}'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Sample123string54with908numbers<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>\d+<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
string

$ <span class="pl-c"><span class="pl-c">#</span> first field will be empty as there is nothing before '{'</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -F'[{}= ]+' '{print $1}'</span>
$ <span class="pl-c"><span class="pl-c">#</span> \x20 is space character, can't use literal space within [] when using -F</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{foo}   bar=baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>[{}=\x20]+<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[0]<span class="pl-pds">'</span></span>

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{foo}   bar=baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>[{}=\x20]+<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
foo
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>{foo}   bar=baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>[{}=\x20]+<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[2]<span class="pl-pds">'</span></span>
bar</pre></div>
<ul>
<li>empty argument to <code>-F</code> will split the input record character wise</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: gawk -v FS= '{print $1}'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>apple<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[0]<span class="pl-pds">'</span></span>
a
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>apple<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
p
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>apple<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[-1]<span class="pl-pds">'</span></span>
e

$ <span class="pl-c"><span class="pl-c">#</span> use -C option when dealing with unicode characters</span>
$ <span class="pl-c"><span class="pl-c">#</span> S will turn on UTF-8 for stdin/stdout/stderr streams</span>
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span>hi👍 how are you?<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -CS -F -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[2]<span class="pl-pds">'</span></span>
👍</pre></div>
<br>
<h4><a href="#specifying-different-output-field-separator" aria-hidden="true" class="anchor" id="user-content-specifying-different-output-field-separator"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-specifying-different-output-field-separator"></a>Specifying different output field separator</h4>
<ul>
<li>Method 1: use <code>$,</code> to change separator between <code>print</code> arguments
<ul>
<li>could be remembered easily by noting that <code>,</code> is used to separate <code>print</code> arguments</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> by default, the various arguments are concatenated</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1], $F[-1]<span class="pl-pds">'</span></span>
123789

$ <span class="pl-c"><span class="pl-c">#</span> change $, if different separator is needed</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>$,=" "; print $F[1], $F[-1]<span class="pl-pds">'</span></span>
123 789
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>$,="-"; print $F[1], $F[-1]<span class="pl-pds">'</span></span>
123-789

$ <span class="pl-c"><span class="pl-c">#</span> argument can be array too</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>$,="-"; print @F[1,-1]<span class="pl-pds">'</span></span>
123-789
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>$,=" - "; print @F<span class="pl-pds">'</span></span>
foo - 123 - bar - 789</pre></div>
<ul>
<li>Method 2: use <code>join</code></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print join "-", $F[1], $F[-1]<span class="pl-pds">'</span></span>
123-789

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print join "-", @F[1,-1]<span class="pl-pds">'</span></span>
123-789

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print join " - ", @F<span class="pl-pds">'</span></span>
foo - 123 - bar - 789</pre></div>
<ul>
<li>Method 3: use <code>$"</code> to change separator when array is interpolated, default is space character
<ul>
<li>could be remembered easily by noting that interpolation happens within double quotes</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> default is space</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print "@F[1,-1]"<span class="pl-pds">'</span></span>
123 789

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>$"="-"; print "@F[1,-1]"<span class="pl-pds">'</span></span>
123-789

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>$"=","; print "@F"<span class="pl-pds">'</span></span>
foo,123,bar,789</pre></div>
<ul>
<li>use <code>BEGIN</code> if same separator is to be used for all lines
<ul>
<li>statements inside <code>BEGIN</code> are executed before processing any input text</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -lane 'BEGIN{$"=","} print "@F"' fruits.txt</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$,=","} print @F<span class="pl-pds">'</span></span> fruits.txt
fruit,qty
apple,42
banana,31
fig,90
guava,6</pre></div>
<h2><a href="#changing-record-separators" aria-hidden="true" class="anchor" id="user-content-changing-record-separators"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-changing-record-separators"></a>Changing record separators</h2>
<ul>
<li>Before seeing examples for changing record separators, let's cover a detail about contents of input record and use of <code>-l</code> option</li>
<li>See also <a href="https://perldoc.perl.org/functions/chomp.html" rel="nofollow">perldoc - chomp</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> input record includes the record separator as well</span>
$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -pe 's/$/ 123/'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\n/ 123\n/<span class="pl-pds">'</span></span>
foo 123

$ <span class="pl-c"><span class="pl-c">#</span> this example shows better use case</span>
$ <span class="pl-c"><span class="pl-c">#</span> similar to paste -sd but with ability to use multi-character delimiter</span>
$ seq 5 <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\n/ : / if !eof<span class="pl-pds">'</span></span>
1 <span class="pl-c1">:</span> 2 <span class="pl-c1">:</span> 3 <span class="pl-c1">:</span> 4 <span class="pl-c1">:</span> 5

$ <span class="pl-c"><span class="pl-c">#</span> -l option will chomp off the record separator (among other things)</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -l -pe <span class="pl-s"><span class="pl-pds">'</span>s/\n/ 123\n/<span class="pl-pds">'</span></span>
foo

$ <span class="pl-c"><span class="pl-c">#</span> -l also sets output record separator which gets added to print statements</span>
$ <span class="pl-c"><span class="pl-c">#</span> ORS gets input record separator value if no argument is passed to -l</span>
$ <span class="pl-c"><span class="pl-c">#</span> hence the newline automatically getting added for print in this example</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[0] if $F[1]&lt;35 &amp;&amp; $.&gt;1<span class="pl-pds">'</span></span> fruits.txt
banana
guava</pre></div>
<br>
<h4><a href="#input-record-separator" aria-hidden="true" class="anchor" id="user-content-input-record-separator"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-input-record-separator"></a>Input record separator</h4>
<ul>
<li>by default, newline character is used as input record separator</li>
<li>use <code>$/</code> to specify a different input record separator
<ul>
<li>unlike <code>awk</code>, only string can be used, no regular expressions</li>
</ul>
</li>
<li>for single character separator, can also use <code>-0</code> command line option which accepts octal/hexadecimal value as argument</li>
<li>if <code>-l</code> option is also used
<ul>
<li>input record separator will be chomped from input record</li>
<li>in addition, if argument is not passed to <code>-l</code>, output record separator will get whatever is current value of input record separator</li>
<li>so, order of <code>-l</code>, <code>-0</code> and/or <code>$/</code> usage becomes important</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>this is a sample string<span class="pl-pds">'</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> space as input record separator, printing all records</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v RS=' ' '{print NR, $0}'</span>
$ <span class="pl-c"><span class="pl-c">#</span> ORS is newline as -l is used before $/ gets changed</span>
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$/=" "} print "$. $_"<span class="pl-pds">'</span></span>
1 this
2 is
3 a
4 sample
5 string

$ <span class="pl-c"><span class="pl-c">#</span> print all records containing 'a'</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v RS=' ' '/a/'</span>
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -l -0040 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /a/<span class="pl-pds">'</span></span>
a
sample

$ <span class="pl-c"><span class="pl-c">#</span> if the order is changed, ORS will be space, not newline</span>
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -0040 -l -ne <span class="pl-s"><span class="pl-pds">'</span>print if /a/<span class="pl-pds">'</span></span>
a sample </pre></div>
<ul>
<li><code>-0</code> option used without argument will use the ASCII NUL character as input record separator</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span>foo\0bar\0<span class="pl-pds">'</span></span> <span class="pl-k">|</span> cat -A
foo^@bar^@$ 
$ <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span>foo\0bar\0<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -l -0 -ne <span class="pl-s"><span class="pl-pds">'</span>print<span class="pl-pds">'</span></span>
foo
bar

$ <span class="pl-c"><span class="pl-c">#</span> could be golfed to: perl -l -0pe ''</span>
$ <span class="pl-c"><span class="pl-c">#</span> but dont use `-l0` as `0` will be treated as argument to `-l`</span></pre></div>
<ul>
<li>values <code>-0400</code> to <code>-0777</code> will cause entire file to be slurped
<ul>
<li>idiomatically, <code>-0777</code> is used</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> s modifier allows . to match newline as well</span>
$ perl -0777 -pe <span class="pl-s"><span class="pl-pds">'</span>s/red.*are //s<span class="pl-pds">'</span></span> poem.txt
Roses are you.

$ <span class="pl-c"><span class="pl-c">#</span> replace first newline with '. '</span>
$ perl -0777 -pe <span class="pl-s"><span class="pl-pds">'</span>s/\n/. /<span class="pl-pds">'</span></span> greeting.txt
Hello there. Have a safe journey</pre></div>
<ul>
<li>for paragraph mode (two more more consecutive newline characters), use <code>-00</code> or assign empty string to <code>$/</code></li>
</ul>
<p>Consider the below sample file</p>
<div class="highlight highlight-source-shell"><pre>$ cat sample.txt
Hello World

Good day
How are you

Just do-it
Believe it

Today is sunny
Not a bit funny
No doubt you like it too

Much ado about nothing
He he he</pre></div>
<ul>
<li>again, input record will have the separator too and using <code>-l</code> will chomp it</li>
<li>however, if more than two consecutive newline characters separate the paragraphs, only two newlines will be preserved and the rest discarded
<ul>
<li>use <code>$/="\n\n"</code> to avoid this behavior</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> print all paragraphs containing 'it'</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v RS= -v ORS='\n\n' '/it/' sample.txt</span>
$ perl -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /it/<span class="pl-pds">'</span></span> sample.txt
Just do-it
Believe it

Today is sunny
Not a bit funny
No doubt you like it too

$ <span class="pl-c"><span class="pl-c">#</span> based on number of lines in each paragraph</span>
$ perl -F<span class="pl-s"><span class="pl-pds">'</span>\n<span class="pl-pds">'</span></span> -00 -ane <span class="pl-s"><span class="pl-pds">'</span>print if $#F==0<span class="pl-pds">'</span></span> sample.txt
Hello World

$ <span class="pl-c"><span class="pl-c">#</span> unlike awk -F'\n' -v RS= -v ORS='\n\n' 'NF==2 &amp;&amp; /do/' sample.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> there wont be empty line at end because input file didn't have it</span>
$ perl -F<span class="pl-s"><span class="pl-pds">'</span>\n<span class="pl-pds">'</span></span> -00 -ane <span class="pl-s"><span class="pl-pds">'</span>print if $#F==1 &amp;&amp; /do/<span class="pl-pds">'</span></span> sample.txt
Just do-it
Believe it

Much ado about nothing
He he he</pre></div>
<ul>
<li>Re-structuring paragraphs</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'BEGIN{FS="\n"; OFS=". "; RS=""; ORS="\n\n"} {$1=$1} 1'</span>
$ perl -F<span class="pl-s"><span class="pl-pds">'</span>\n<span class="pl-pds">'</span></span> -00 -ane <span class="pl-s"><span class="pl-pds">'</span>print join ". ", @F; print "\n\n"<span class="pl-pds">'</span></span> sample.txt
Hello World

Good day. How are you

Just do-it. Believe it

Today is sunny. Not a bit funny. No doubt you like it too

Much ado about nothing. He he he
</pre></div>
<ul>
<li>multi-character separator</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat report.log 
blah blah
Error: something went wrong
more blah
whatever
Error: something surely went wrong
some text
some more text
blah blah blah

$ <span class="pl-c"><span class="pl-c">#</span> number of records, same as: awk -v RS='Error:' 'END{print NR}'</span>
$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$/="Error:"} print $. if eof<span class="pl-pds">'</span></span> report.log
3
$ <span class="pl-c"><span class="pl-c">#</span> print first record</span>
$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$/="Error:"} print if $.==1<span class="pl-pds">'</span></span> report.log
blah blah

$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v RS='Error:' '/surely/{print RS $0}' report.log</span>
$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$/="Error:"} print "$/$_" if /surely/<span class="pl-pds">'</span></span> report.log
Error: something surely went wrong
some text
some more text
blah blah blah
</pre></div>
<ul>
<li>Joining lines based on specific end of line condition</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat msg.txt
Hello there.
It will rain to-
day. Have a safe
and pleasant jou-
rney.

$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v RS='-\n' -v ORS= '1' msg.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -pe 's/-\n//' msg.txt</span>
$ perl -pe <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$/="-\n"} chomp<span class="pl-pds">'</span></span> msg.txt
Hello there.
It will rain today. Have a safe
and pleasant journey.</pre></div>
<br>
<h4><a href="#output-record-separator" aria-hidden="true" class="anchor" id="user-content-output-record-separator"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-output-record-separator"></a>Output record separator</h4>
<ul>
<li>one way is to use <code>$\</code> to specify a different output record separator
<ul>
<li>by default it doesn't have a value</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> note that despite $\ not having a value, output has newlines</span>
$ <span class="pl-c"><span class="pl-c">#</span> because the input record still has the input record separator</span>
$ seq 3 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print<span class="pl-pds">'</span></span>
1
2
3
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v ORS='\n\n' '{print $0}'</span>
$ seq 3 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$\="\n"} print<span class="pl-pds">'</span></span>
1

2

3

$ seq 2 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$\="---\n"} print<span class="pl-pds">'</span></span>
1
---
2
---</pre></div>
<ul>
<li>dynamically changing output record separator</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '{ORS = NR%2 ? " " : "\n"} 1'</span>
$ <span class="pl-c"><span class="pl-c">#</span> note the use of -l to chomp the input record separator</span>
$ seq 6 <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>$\ = $.%2 ? " " : "\n"<span class="pl-pds">'</span></span>
1 2
3 4
5 6

$ <span class="pl-c"><span class="pl-c">#</span> -l also sets the output record separator</span>
$ <span class="pl-c"><span class="pl-c">#</span> but gets overridden by $\</span>
$ seq 6 <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>$\ = $.%3 ? "-" : "\n"<span class="pl-pds">'</span></span>
1-2-3
4-5-6</pre></div>
<ul>
<li>passing argument to <code>-l</code> to set output record separator</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ seq 8 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if /[24]/<span class="pl-pds">'</span></span>
2
4

$ <span class="pl-c"><span class="pl-c">#</span> null separator, note how -l also chomps input record separator</span>
$ seq 8 <span class="pl-k">|</span> perl -l0 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /[24]/<span class="pl-pds">'</span></span> <span class="pl-k">|</span> cat -A
2^@4^@

$ <span class="pl-c"><span class="pl-c">#</span> comma separator, won't have a newline at end</span>
$ seq 8 <span class="pl-k">|</span> perl -l054 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /[24]/<span class="pl-pds">'</span></span>
2,4, 

$ <span class="pl-c"><span class="pl-c">#</span> to add a final newline to output, use END and printf</span>
$ seq 8 <span class="pl-k">|</span> perl -l054 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /[24]/; END{printf "\n"}<span class="pl-pds">'</span></span>
2,4,</pre></div>
<br>
<h2><a href="#multiline-processing" aria-hidden="true" class="anchor" id="user-content-multiline-processing"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-multiline-processing"></a>Multiline processing</h2>
<ul>
<li>Processing consecutive lines</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat poem.txt 
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.

$ <span class="pl-c"><span class="pl-c">#</span> match two consecutive lines</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'p~/are/ &amp;&amp; /is/{print p ORS $0} {p=$0}' poem.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print "$p$_" if /is/ &amp;&amp; $p=~/are/; $p=$_<span class="pl-pds">'</span></span> poem.txt
Violets are blue,
Sugar is sweet,
$ <span class="pl-c"><span class="pl-c">#</span> if only the second line is needed, same as: awk 'p~/are/ &amp;&amp; /is/; {p=$0}'</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if /is/ &amp;&amp; $p=~/are/; $p=$_<span class="pl-pds">'</span></span> poem.txt
Sugar is sweet,

$ <span class="pl-c"><span class="pl-c">#</span> print if line matches a condition as well as condition for next 2 lines</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'p2~/red/ &amp;&amp; p1~/blue/ &amp;&amp; /is/{print p2} {p2=p1; p1=$0}'</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print $p2 if /is/ &amp;&amp; $p1=~/blue/ &amp;&amp; $p2=~/red/;</span>
<span class="pl-s">            $p2=$p1; $p1=$_<span class="pl-pds">'</span></span> poem.txt
Roses are red,</pre></div>
<p>Consider this sample input file</p>
<div class="highlight highlight-source-shell"><pre>$ cat range.txt 
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
END
baz</pre></div>
<ul>
<li>extracting lines around matching line</li>
<li>how <code>$n &amp;&amp; $n--</code> works:
<ul>
<li>need to note that right hand side of <code>&amp;&amp;</code> is processed only if left hand side is <code>true</code></li>
<li>so for example, if initially <code>$n=2</code>, then we get
<ul>
<li><code>2 &amp;&amp; 2; $n=1</code> - evaluates to <code>true</code></li>
<li><code>1 &amp;&amp; 1; $n=0</code> - evaluates to <code>true</code></li>
<li><code>0 &amp;&amp;</code> - evaluates to <code>false</code> ... no decrementing <code>$n</code> and hence will be <code>false</code> until <code>$n</code> is re-assigned non-zero value</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> similar to: grep --no-group-separator -A1 'BEGIN' range.txt </span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/BEGIN/{n=2} n &amp;&amp; n--' range.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$n=2 if /BEGIN/; print if $n &amp;&amp; $n--<span class="pl-pds">'</span></span> range.txt
BEGIN
1234
BEGIN
a

$ <span class="pl-c"><span class="pl-c">#</span> print only line after matching line, same as: awk 'n &amp;&amp; n--; /BEGIN/{n=1}'</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $n &amp;&amp; $n--; $n=1 if /BEGIN/<span class="pl-pds">'</span></span> range.txt
1234
a

$ <span class="pl-c"><span class="pl-c">#</span> generic case: print nth line after match, awk 'n &amp;&amp; !--n; /BEGIN/{n=3}'</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $n &amp;&amp; !--$n; $n=3 if /BEGIN/<span class="pl-pds">'</span></span> range.txt
END
c

$ <span class="pl-c"><span class="pl-c">#</span> print second line prior to matched line</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/END/{print p2} {p2=p1; p1=$0}' range.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print $p2 if /END/; $p2=$p1; $p1=$_<span class="pl-pds">'</span></span> range.txt
1234
b

$ <span class="pl-c"><span class="pl-c">#</span> use reversing trick for generic case of nth line before match</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: tac range.txt | awk 'n &amp;&amp; !--n; /END/{n=3}' | tac</span>
$ tac range.txt <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $n &amp;&amp; !--$n; $n=3 if /END/<span class="pl-pds">'</span></span> <span class="pl-k">|</span> tac
BEGIN
a</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://stackoverflow.com/questions/39884112/perl-multiline-find-and-replace-with-regex" rel="nofollow">stackoverflow - multiline find and replace</a></li>
<li><a href="https://softwareengineering.stackexchange.com/questions/47806/examples-of-finite-state-machines" rel="nofollow">softwareengineering - FSM examples</a></li>
<li><a href="https://en.wikipedia.org/wiki/Finite-state_machine" rel="nofollow">wikipedia - FSM</a></li>
</ul>
<br>
<h2><a href="#perl-regular-expressions" aria-hidden="true" class="anchor" id="user-content-perl-regular-expressions"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-perl-regular-expressions"></a>Perl regular expressions</h2>
<ul>
<li>examples to showcase some of the features not present in ERE and modifiers not available in <code>sed</code>'s substitute command</li>
<li>many features of Perl regular expressions will NOT be covered, but external links will be provided wherever relevant
<ul>
<li>See <a href="https://perldoc.perl.org/perlre.html" rel="nofollow">perldoc - perlre</a> for complete reference</li>
<li>and <a href="https://perldoc.perl.org/perlfaq.html#the-perlfaq6-manpage%3a-Regular-Expressions" rel="nofollow">perldoc - regular expressions FAQ</a></li>
</ul>
</li>
<li>examples/descriptions based only on ASCII encoding</li>
</ul>
<br>
<h4><a href="#sed-vs-perl-subtle-differences" aria-hidden="true" class="anchor" id="user-content-sed-vs-perl-subtle-differences"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-sed-vs-perl-subtle-differences"></a>sed vs perl subtle differences</h4>
<ul>
<li>input record separator being part of input record</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed -E <span class="pl-s"><span class="pl-pds">'</span>s/[^:]+$/xyz/<span class="pl-pds">'</span></span>
foo:123:bar:xyz
$ <span class="pl-c"><span class="pl-c">#</span> newline character gets replaced too as shown by shell prompt</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/[^:]+$/xyz/<span class="pl-pds">'</span></span>
foo:123:bar:xyz$ 
$ <span class="pl-c"><span class="pl-c">#</span> simple workaround is to use -l option</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/[^:]+$/xyz/<span class="pl-pds">'</span></span>
foo:123:bar:xyz

$ <span class="pl-c"><span class="pl-c">#</span> of course it has uses too</span>
$ seq 10 <span class="pl-k">|</span> paste -sd, <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/,/ : /g<span class="pl-pds">'</span></span>
1 <span class="pl-c1">:</span> 2 <span class="pl-c1">:</span> 3 <span class="pl-c1">:</span> 4 <span class="pl-c1">:</span> 5 <span class="pl-c1">:</span> 6 <span class="pl-c1">:</span> 7 <span class="pl-c1">:</span> 8 <span class="pl-c1">:</span> 9 <span class="pl-c1">:</span> 10
$ seq 10 <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\n/ : / if !eof<span class="pl-pds">'</span></span>
1 <span class="pl-c1">:</span> 2 <span class="pl-c1">:</span> 3 <span class="pl-c1">:</span> 4 <span class="pl-c1">:</span> 5 <span class="pl-c1">:</span> 6 <span class="pl-c1">:</span> 7 <span class="pl-c1">:</span> 8 <span class="pl-c1">:</span> 9 <span class="pl-c1">:</span> 10</pre></div>
<ul>
<li>how much does <code>*</code> match?</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> sed will choose biggest match</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>,baz,,xyz,,,<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/[^,]*/A/g<span class="pl-pds">'</span></span>
A,A,A,A,A,A,A
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo,baz,,xyz,,,123<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/[^,]*/A/g<span class="pl-pds">'</span></span>
A,A,A,A,A,A,A

$ <span class="pl-c"><span class="pl-c">#</span> but perl will match both empty and non-empty strings</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>,baz,,xyz,,,<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/[^,]*/A/g<span class="pl-pds">'</span></span>
A,AA,A,AA,A,A,A
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo,baz,,xyz,,,123<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/[^,]*/A/g<span class="pl-pds">'</span></span>
AA,AA,A,AA,A,A,AA

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>42,789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/[0-9]*/"&amp;"/g<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>42<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>789<span class="pl-pds">"</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>42,789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/\d*/"$&amp;"/g<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>42<span class="pl-pds">"</span><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>789<span class="pl-pds">"</span><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>42,789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/\d+/"$&amp;"/g<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>42<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>789<span class="pl-pds">"</span></span></pre></div>
<ul>
<li>backslash sequences inside character classes</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> \w would simply match w</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>w=y-x+9*3<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/[\w=]//g<span class="pl-pds">'</span></span>
y-x+9<span class="pl-k">*</span>3

$ <span class="pl-c"><span class="pl-c">#</span> \w would match any word character</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>w=y-x+9*3<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/[\w=]//g<span class="pl-pds">'</span></span>
-+<span class="pl-k">*</span></pre></div>
<ul>
<li>replacing specific occurrence</li>
<li>See <a href="https://stackoverflow.com/questions/2555662/how-can-i-substitute-the-nth-occurrence-of-a-match-in-a-perl-regex" rel="nofollow">stackoverflow - substitute the nth occurrence of a match in a Perl regex</a> for workarounds</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/:/-/2<span class="pl-pds">'</span></span>
foo:123-bar:baz

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/:/-/2<span class="pl-pds">'</span></span>
Unknown regexp modifier <span class="pl-s"><span class="pl-pds">"</span>/2<span class="pl-pds">"</span></span> at -e line 1, at end of line
Execution of -e aborted due to compilation errors.
$ <span class="pl-c"><span class="pl-c">#</span> e modifier covered later, allows Perl code in replacement section</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo:123:bar:baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>$c=0; s/:/++$c==2 ? "-" : $&amp;/ge<span class="pl-pds">'</span></span>
foo:123-bar:baz
$ <span class="pl-c"><span class="pl-c">#</span> or use non-greedy and lookbehind(covered later), same as: sed 's/and/-/3'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo and bar and baz land good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(and.*?){2}\Kand/-/<span class="pl-pds">'</span></span>
foo and bar and baz l- good

$ <span class="pl-c"><span class="pl-c">#</span> emulating GNU sed's number+g modifier</span>
$ a=<span class="pl-s"><span class="pl-pds">'</span>456:foo:123:bar:789:baz</span>
<span class="pl-s">x:y:z:a:v:xc:gf<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$a</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> sed -E <span class="pl-s"><span class="pl-pds">'</span>s/:/-/3g<span class="pl-pds">'</span></span>
456:foo:123-bar-789-baz
x:y:z-a-v-xc-gf
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$a</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>$c=0; s/:/++$c&lt;3 ? $&amp; : "-"/ge<span class="pl-pds">'</span></span>
456:foo:123-bar-789-baz
x:y:z-a-v-xc-gf</pre></div>
<ul>
<li>variable interpolation when <code>$</code> or <code>@</code> is used</li>
<li>See also <a href="https://perldoc.perl.org/5.8.8/perlop.html#Quote-and-Quote-like-Operators" rel="nofollow">perldoc - Quote and Quote-like Operators</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ seq 2 <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/$x/xyz/<span class="pl-pds">'</span></span>
1
2

$ <span class="pl-c"><span class="pl-c">#</span> uninitialized variable, same applies for: perl -pe 's/@a/xyz/'</span>
$ seq 2 <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/$x/xyz/<span class="pl-pds">'</span></span>
xyz1
xyz2
$ <span class="pl-c"><span class="pl-c">#</span> initialized variable</span>
$ seq 2 <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>$x=2; s/$x/xyz/<span class="pl-pds">'</span></span>
1
xyz

$ <span class="pl-c"><span class="pl-c">#</span> using single quotes as delimiter won't interpolate</span>
$ <span class="pl-c"><span class="pl-c">#</span> not usable for one-liners given shell's own single/double quotes behavior</span>
$ cat sub_sq.pl
s<span class="pl-s"><span class="pl-pds">'</span>$x<span class="pl-pds">'</span></span>xyz<span class="pl-s"><span class="pl-pds">'</span></span>
<span class="pl-s">$ seq 2 | perl -p sub_sq.pl</span>
<span class="pl-s">1</span>
<span class="pl-s">2</span></pre></div>
<ul>
<li>back reference</li>
<li>See also <a href="https://perldoc.perl.org/perlre.html#Warning-on-%5c1-Instead-of-%241" rel="nofollow">perldoc - Warning on \1 Instead of $1</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> use $&amp; to refer entire matched string in replacement section</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>hello world<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s/.*/"&amp;"/<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>hello world<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/.*/"&amp;"/<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>&amp;<span class="pl-pds">"</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>hello world<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/.*/"$&amp;"/<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> use \1, \2, etc or \g1, \g2 etc for back referencing in search section</span>
$ <span class="pl-c"><span class="pl-c">#</span> use $1, $2, etc in replacement section</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a a a walking for for a cause<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\b(\w+)( \1)+\b/$1/g<span class="pl-pds">'</span></span>
a walking <span class="pl-k">for</span> a cause</pre></div>
<br>
<h4><a href="#backslash-sequences" aria-hidden="true" class="anchor" id="user-content-backslash-sequences"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-backslash-sequences"></a>Backslash sequences</h4>
<ul>
<li><code>\d</code> for <code>[0-9]</code></li>
<li><code>\s</code> for <code>[ \t\r\n\f\v]</code></li>
<li><code>\h</code> for <code>[ \t]</code></li>
<li><code>\n</code> for newline character</li>
<li><code>\D</code>, <code>\S</code>, <code>\H</code>, <code>\N</code> respectively for their opposites</li>
<li>See <a href="https://perldoc.perl.org/perlrecharclass.html#Backslash-sequences" rel="nofollow">perldoc - perlrecharclass</a> for full list and details</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: sed -E 's/[0-9]+/xxx/g'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>like 42 and 37<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\d+/xxx/g<span class="pl-pds">'</span></span>
like xxx and xxx

$ <span class="pl-c"><span class="pl-c">#</span> same as: sed -E 's/[^0-9]+/xxx/g'</span>
$ <span class="pl-c"><span class="pl-c">#</span> note again the use of -l because of newline in input record</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>like 42 and 37<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/\D+/xxx/g<span class="pl-pds">'</span></span>
xxx42xxx37

$ <span class="pl-c"><span class="pl-c">#</span> no need -l here as \h won't match newline</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c  <span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\h*$//<span class="pl-pds">'</span></span>
a b c</pre></div>
<br>
<h4><a href="#non-greedy-quantifier" aria-hidden="true" class="anchor" id="user-content-non-greedy-quantifier"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-non-greedy-quantifier"></a>Non-greedy quantifier</h4>
<ul>
<li>adding a <code>?</code> to <code>?</code> or <code>*</code> or <code>+</code> or <code>{}</code> quantifiers will change matching from greedy to non-greedy. In other words, to match as minimally as possible
<ul>
<li>also known as lazy quantifier</li>
</ul>
</li>
<li>See also <a href="https://www.regular-expressions.info/possessive.html" rel="nofollow">regular-expressions.info - Possessive Quantifiers</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> greedy matching</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo and bar and baz land good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/foo.*and//<span class="pl-pds">'</span></span>
 good
$ <span class="pl-c"><span class="pl-c">#</span> non-greedy matching</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo and bar and baz land good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/foo.*?and//<span class="pl-pds">'</span></span>
 bar and baz land good

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>12342789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\d{2,5}//<span class="pl-pds">'</span></span>
789
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>12342789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\d{2,5}?//<span class="pl-pds">'</span></span>
342789

$ <span class="pl-c"><span class="pl-c">#</span> for single character, non-greedy is not always needed</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>123:42:789:good:5:bad<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/:.*?:/:/<span class="pl-pds">'</span></span>
123:789:good:5:bad
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>123:42:789:good:5:bad<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/:[^:]*:/:/<span class="pl-pds">'</span></span>
123:789:good:5:bad

$ <span class="pl-c"><span class="pl-c">#</span> just like greedy, overall matching is considered, as minimal as possible</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>123:42:789:good:5:bad<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/:.*?:[a-z]/:/<span class="pl-pds">'</span></span>
123:ood:5:bad
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>123:42:789:good:5:bad<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/:.*:[a-z]/:/<span class="pl-pds">'</span></span>
123:ad</pre></div>
<br>
<h4><a href="#lookarounds" aria-hidden="true" class="anchor" id="user-content-lookarounds"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-lookarounds"></a>Lookarounds</h4>
<ul>
<li>Ability to add if conditions to match before/after required pattern</li>
<li>There are four types
<ul>
<li>positive lookahead <code>(?=</code></li>
<li>negative lookahead <code>(?!</code></li>
<li>positive lookbehind <code>(?&lt;=</code></li>
<li>negative lookbehind <code>(?&lt;!</code></li>
</ul>
</li>
<li>One way to remember is that <strong>behind</strong> uses <code>&lt;</code> and <strong>negative</strong> uses <code>!</code> instead of <code>=</code></li>
</ul>
<p>The string matched by lookarounds are like word boundaries and anchors, do not constitute as part of matched string. They are termed as <strong>zero-width patterns</strong></p>
<ul>
<li>positive lookbehind <code>(?&lt;=</code></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>foo=5, bar=3; x=83, y=120<span class="pl-pds">'</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> extract all digit sequences</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join " ", /\d+/g<span class="pl-pds">'</span></span>
5 3 83 120

$ <span class="pl-c"><span class="pl-c">#</span> extract digits only if preceded by two lowercase alphabets and =</span>
$ <span class="pl-c"><span class="pl-c">#</span> note how the characters matched by lookbehind isn't part of output</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join " ", /(?&lt;=[a-z]{2}=)\d+/g<span class="pl-pds">'</span></span>
5 3

$ <span class="pl-c"><span class="pl-c">#</span> this can be done without lookbehind too</span>
$ <span class="pl-c"><span class="pl-c">#</span> taking advantage of behavior of //g when () is used</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join " ", /[a-z]{2}=(\d+)/g<span class="pl-pds">'</span></span>
5 3

$ <span class="pl-c"><span class="pl-c">#</span> change all digits preceded by single lowercase alphabet and =</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(?&lt;=\b[a-z]=)\d+/42/g<span class="pl-pds">'</span></span>
foo=5, bar=3<span class="pl-k">;</span> x=42, y=42
$ <span class="pl-c"><span class="pl-c">#</span> alternate, without lookbehind</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(\b[a-z]=)\d+/${1}42/g<span class="pl-pds">'</span></span>
foo=5, bar=3<span class="pl-k">;</span> x=42, y=42</pre></div>
<ul>
<li>positive lookahead <code>(?=</code></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>foo=5, bar=3; x=83, y=120<span class="pl-pds">'</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> extract digits that end with ,</span>
$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -lne 'print join ":", /(\d+),/g'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join ":", /\d+(?=,)/g<span class="pl-pds">'</span></span>
5:83

$ <span class="pl-c"><span class="pl-c">#</span> change all digits ending with ,</span>
$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -pe 's/\d+,/42,/g'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\d+(?=,)/42/g<span class="pl-pds">'</span></span>
foo=42, bar=3<span class="pl-k">;</span> x=42, y=120

$ <span class="pl-c"><span class="pl-c">#</span> both lookbehind and lookahead</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo,,baz,,,xyz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/,,/,NA,/g<span class="pl-pds">'</span></span>
foo,NA,baz,NA,,xyz
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo,,baz,,,xyz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(?&lt;=,)(?=,)/NA/g<span class="pl-pds">'</span></span>
foo,NA,baz,NA,NA,xyz</pre></div>
<ul>
<li>negative lookbehind <code>(?&lt;!</code> and negative lookahead <code>(?!</code></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> change foo if not preceded by _</span>
$ <span class="pl-c"><span class="pl-c">#</span> note how 'foo' at start of line is matched as well</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo _foo 1foo<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(?&lt;!_)foo/baz/g<span class="pl-pds">'</span></span>
baz _foo 1baz

$ <span class="pl-c"><span class="pl-c">#</span> join each line in paragraph by replacing newline character</span>
$ <span class="pl-c"><span class="pl-c">#</span> except the one at end of paragraph</span>
$ perl -00 -pe <span class="pl-s"><span class="pl-pds">'</span>s/\n(?!$)/. /g<span class="pl-pds">'</span></span> sample.txt
Hello World

Good day. How are you

Just do-it. Believe it

Today is sunny. Not a bit funny. No doubt you like it too

Much ado about nothing. He he he</pre></div>
<ul>
<li>variable lookbehind with <code>\K</code></li>
<li>useful when positive lookbehind is not a constant length of characters to look up
<ul>
<li>for ex: quantifiers that can match different number of characters</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> lookbehind is checking start of line (0 characters) and comma(1 character)</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>,baz,,,xyz,,<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(?&lt;=^|,)(?=,|$)/NA/g<span class="pl-pds">'</span></span>
Variable length lookbehind not implemented <span class="pl-k">in</span> regex m/(<span class="pl-k">?</span><span class="pl-k">&lt;</span>=^<span class="pl-k">|</span>,)(<span class="pl-k">?</span>=,<span class="pl-k">|</span>$)/ at -e line 1.

$ <span class="pl-c"><span class="pl-c">#</span> \K helps in such cases</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>,baz,,,xyz,,<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(^|,)\K(?=,|$)/NA/g<span class="pl-pds">'</span></span>
NA,baz,NA,NA,xyz,NA,NA</pre></div>
<ul>
<li>some more examples</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> helps to avoid , within fields for field splitting</span>
$ <span class="pl-c"><span class="pl-c">#</span> note how the quotes are still part of field value</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>"foo","12,34","good"<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>/"\K,(?=")/<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>12,34<span class="pl-pds">"</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>"foo","12,34","good"<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>/"\K,(?=")/<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[2]<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>good<span class="pl-pds">"</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> capture groups inside lookarounds</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c d e<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(\H+\h+)(?=(\H+)\h)/$1$2\n/g<span class="pl-pds">'</span></span>
a b
b c
c d
d e
$ <span class="pl-c"><span class="pl-c">#</span> generic formula :)</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c d e<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(\H+\h+)(?=(\H+(\h+\H+){1})\h)/$1$2\n/g<span class="pl-pds">'</span></span>
a b c
b c d
c d e
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c d e<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(\H+\h+)(?=(\H+(\h+\H+){2})\h)/$1$2\n/g<span class="pl-pds">'</span></span>
a b c d
b c d e</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://stackoverflow.com/questions/46870285/reverse-four-length-of-letters-with-sed-in-unix" rel="nofollow">stackoverflow - reverse four letter words</a></li>
<li><a href="https://stackoverflow.com/questions/42437747/pcre-negative-lookahead-gives-unexpected-match" rel="nofollow">stackoverflow - lookarounds and possessive quantifier</a></li>
</ul>
<br>
<h4><a href="#ignoring-specific-matches" aria-hidden="true" class="anchor" id="user-content-ignoring-specific-matches"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-ignoring-specific-matches"></a>Ignoring specific matches</h4>
<ul>
<li>A useful construct is <code>(*SKIP)(*F)</code> which allows to discard matches not needed
<ul>
<li>regular expression which should be discarded is written first, <code>(*SKIP)(*F)</code> is appended and then required regular expression is added after <code>|</code></li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>Car Bat cod12 Map foo_bar<span class="pl-pds">'</span></span>
$ <span class="pl-c"><span class="pl-c">#</span> all words except those starting with 'c' or 'C'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join "\n", /\bc\w+(*SKIP)(*F)|\w+/gi<span class="pl-pds">'</span></span>
Bat
Map
foo_bar

$ s=<span class="pl-s"><span class="pl-pds">'</span>I like "mango" and "guava"<span class="pl-pds">'</span></span>
$ <span class="pl-c"><span class="pl-c">#</span> all words except those surrounded by double quotes</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join "\n", /"[^"]+"(*SKIP)(*F)|\w+/g<span class="pl-pds">'</span></span>
I
like
and
$ <span class="pl-c"><span class="pl-c">#</span> change words except those surrounded by double quotes</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/"[^"]+"(*SKIP)(*F)|\w+/\U$&amp;/g<span class="pl-pds">'</span></span>
I LIKE <span class="pl-s"><span class="pl-pds">"</span>mango<span class="pl-pds">"</span></span> AND <span class="pl-s"><span class="pl-pds">"</span>guava<span class="pl-pds">"</span></span></pre></div>
<ul>
<li>for line based decisions, simple if-else might help</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat nums.txt
42
-2
10101
-3.14
-75

$ <span class="pl-c"><span class="pl-c">#</span> change +ve number to -ve and vice versa</span>
$ <span class="pl-c"><span class="pl-c">#</span> note that empty regexp will reuse last successfully matched regexp</span>
$ perl -pe <span class="pl-s"><span class="pl-pds">'</span>/^-/ ? s/// : s/^/-/<span class="pl-pds">'</span></span> nums.txt
-42
2
-10101
3.14
75</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://perldoc.perl.org/perlre.html#Special-Backtracking-Control-Verbs" rel="nofollow">perldoc - Special Backtracking Control Verbs</a></li>
<li><a href="https://www.rexegg.com/backtracking-control-verbs.html#skipfail" rel="nofollow">rexegg - Excluding Unwanted Matches</a></li>
</ul>
<br>
<h4><a href="#special-capture-groups" aria-hidden="true" class="anchor" id="user-content-special-capture-groups"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-special-capture-groups"></a>Special capture groups</h4>
<ul>
<li><code>\1</code>, <code>\2</code> etc only matches exact string</li>
<li><code>(?1)</code>, <code>(?2)</code> etc re-uses the regular expression itself</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>baz 2008-03-24 and 2012-08-12 foo 2016-03-25<span class="pl-pds">'</span></span>
$ <span class="pl-c"><span class="pl-c">#</span> (?1) refers to first capture group (\d{4}-\d{2}-\d{2})</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(\d{4}-\d{2}-\d{2}) and (?1)//<span class="pl-pds">'</span></span>
baz  foo 2016-03-25

$ <span class="pl-c"><span class="pl-c">#</span> using \1 won't work as the two dates are different</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(\d{4}-\d{2}-\d{2}) and \1//<span class="pl-pds">'</span></span>
baz 2008-03-24 and 2012-08-12 foo 2016-03-25</pre></div>
<ul>
<li>use <code>(?:</code> to group regular expressions without capturing it, so this won't be counted for backreference</li>
<li>See also
<ul>
<li><a href="https://stackoverflow.com/questions/3512471/what-is-a-non-capturing-group-what-does-a-question-mark-followed-by-a-colon" rel="nofollow">stackoverflow - what is non-capturing group</a></li>
<li><a href="https://stackoverflow.com/questions/46632397/parse-vcf-files-info-field" rel="nofollow">stackoverflow - extract specific fields and key-value pairs</a></li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>Car Bat cod12 Map foo_bar<span class="pl-pds">'</span></span>
$ <span class="pl-c"><span class="pl-c">#</span> check what happens if ?: is not used</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join "\n", /(?:Bat|Map)(*SKIP)(*F)|\w+/gi<span class="pl-pds">'</span></span>
Car
cod12
foo_bar

$ <span class="pl-c"><span class="pl-c">#</span> using ?: helps to focus only on required capture groups</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>cod1 foo_bar<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(?:co|fo)\K(\w)(\w)/$2$1/g<span class="pl-pds">'</span></span>
co1d fo_obar
$ <span class="pl-c"><span class="pl-c">#</span> without ?: you'd need to remember all the other groups as well</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>cod1 foo_bar<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(co|fo)\K(\w)(\w)/$3$2/g<span class="pl-pds">'</span></span>
co1d fo_obar</pre></div>
<ul>
<li>named capture groups <code>(?&lt;name&gt;</code>
<ul>
<li>for backreference, use <code>\k&lt;name&gt;</code></li>
<li>accessible via <code>%+</code> hash in replacement section</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>baz 2008-03-24 and 2012-08-12 foo 2016-03-25<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(\d{4})-(\d{2})-(\d{2})/$3-$2-$1/g<span class="pl-pds">'</span></span>
baz 24-03-2008 and 12-08-2012 foo 25-03-2016

$ <span class="pl-c"><span class="pl-c">#</span> naming the capture groups might offer clarity</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(?&lt;y&gt;\d{4})-(?&lt;m&gt;\d{2})-(?&lt;d&gt;\d{2})/$+{d}-$+{m}-$+{y}/g<span class="pl-pds">'</span></span>
baz 24-03-2008 and 12-08-2012 foo 25-03-2016
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/(?&lt;y&gt;\d{4})-(?&lt;m&gt;\d{2})-(?&lt;d&gt;\d{2})/$+{m}-$+{d}-$+{y}/g<span class="pl-pds">'</span></span>
baz 03-24-2008 and 08-12-2012 foo 03-25-2016

$ <span class="pl-c"><span class="pl-c">#</span> and useful to transform different capture groups</span>
$ s=<span class="pl-s"><span class="pl-pds">'</span>"foo,bar",123,"x,y,z",42<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/"(?&lt;a&gt;[^"]+)",|(?&lt;a&gt;[^,]+),/$+{a}|/g<span class="pl-pds">'</span></span>
foo,bar<span class="pl-k">|</span>123<span class="pl-k">|</span>x,y,z<span class="pl-k">|</span>42
$ <span class="pl-c"><span class="pl-c">#</span> can also use (?| branch reset</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/(?|"([^"]+)",|([^,]+),)/$1|/g<span class="pl-pds">'</span></span>
foo,bar<span class="pl-k">|</span>123<span class="pl-k">|</span>x,y,z<span class="pl-k">|</span>42</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://perldoc.perl.org/perlre.html#Extended-Patterns" rel="nofollow">perldoc - Extended Patterns</a></li>
<li><a href="https://www.rexegg.com/regex-disambiguation.html" rel="nofollow">rexegg - all the (? usages</a></li>
<li><a href="https://www.regular-expressions.info/recurse.html#balanced" rel="nofollow">regular-expressions - recursion</a></li>
</ul>
<br>
<h4><a href="#modifiers" aria-hidden="true" class="anchor" id="user-content-modifiers"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-modifiers"></a>Modifiers</h4>
<ul>
<li>some are already seen, like the <code>g</code> (global match) and <code>i</code> (case insensitive matching)</li>
<li>first up, the <code>r</code> modifier which returns the substitution result instead of modifying the variable it is acting upon</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -e <span class="pl-s"><span class="pl-pds">'</span>$x="feed"; $y=$x=~s/e/E/gr; print "x=$x\ny=$y\n"<span class="pl-pds">'</span></span>
x=feed
y=fEEd

$ <span class="pl-c"><span class="pl-c">#</span> the r modifier is available for transliteration operator too</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>$x="food"; $y=$x=~tr/a-z/A-Z/r; print "x=$x\ny=$y\n"<span class="pl-pds">'</span></span>
x=food
y=FOOD</pre></div>
<ul>
<li><code>e</code> modifier allows to use Perl code in replacement section instead of string</li>
<li>use <code>ee</code> if you need to construct a string and then apply evaluation</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> replace numbers with their squares</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>4 and 10<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\d+/$&amp;*$&amp;/ge<span class="pl-pds">'</span></span>
16 and 100

$ <span class="pl-c"><span class="pl-c">#</span> replace matched string with incremental value</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>4 and 10 foo 57<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\d+/++$c/ge<span class="pl-pds">'</span></span>
1 and 2 foo 3
$ <span class="pl-c"><span class="pl-c">#</span> passing initial value</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>4 and 10 foo 57<span class="pl-pds">'</span></span> <span class="pl-k">|</span> c=100 perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\d+/$ENV{c}++/ge<span class="pl-pds">'</span></span>
100 and 101 foo 102

$ <span class="pl-c"><span class="pl-c">#</span> formatting string</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a1-2-deed<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>s/[^-]+/sprintf "%04s", $&amp;/ge<span class="pl-pds">'</span></span>
00a1-0002-deed

$ <span class="pl-c"><span class="pl-c">#</span> calling a function</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>food:12:explain:789<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\w+/length($&amp;)/ge<span class="pl-pds">'</span></span>
4:2:7:3

$ <span class="pl-c"><span class="pl-c">#</span> applying another substitution to matched string</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>"mango" and "guava"<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/"[^"]+"/$&amp;=~s|a|A|gr/ge<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>mAngo<span class="pl-pds">"</span></span> and <span class="pl-s"><span class="pl-pds">"</span>guAvA<span class="pl-pds">"</span></span></pre></div>
<ul>
<li>multiline modifiers</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> m modifier to match beginning/end of each line within multiline string</span>
$ perl -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /^Believe/<span class="pl-pds">'</span></span> sample.txt
$ perl -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /^Believe/m<span class="pl-pds">'</span></span> sample.txt
Just do-it
Believe it

$ perl -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /funny$/<span class="pl-pds">'</span></span> sample.txt
$ perl -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /funny$/m<span class="pl-pds">'</span></span> sample.txt
Today is sunny
Not a bit funny
No doubt you like it too

$ <span class="pl-c"><span class="pl-c">#</span> s modifier to allow . meta character to match newlines as well</span>
$ perl -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /do.*he/<span class="pl-pds">'</span></span> sample.txt
$ perl -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /do.*he/s<span class="pl-pds">'</span></span> sample.txt
Much ado about nothing
He he he</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://perldoc.perl.org/perlre.html#Modifiers" rel="nofollow">perldoc - perlre Modifiers</a></li>
<li><a href="https://stackoverflow.com/questions/40458639/replacement-within-the-matched-string-with-sed" rel="nofollow">stackoverflow - replacement within matched string</a></li>
</ul>
<br>
<h4><a href="#quoting-metacharacters" aria-hidden="true" class="anchor" id="user-content-quoting-metacharacters"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-quoting-metacharacters"></a>Quoting metacharacters</h4>
<ul>
<li>part of regular expression can be surrounded within <code>\Q</code> and <code>\E</code> to prevent matching meta characters within that portion
<ul>
<li>however, <code>$</code> and <code>@</code> would still be interpolated as long as delimiter isn't single quotes</li>
<li><code>\E</code> is optional if applying <code>\Q</code> till end of search expression</li>
</ul>
</li>
<li>typical use case is string to be protected is already present in a variable, for ex: user input or result of another command</li>
<li>quotemeta will add a backslash to all characters other than <code>\w</code> characters</li>
<li>See also <a href="https://perldoc.perl.org/perlre.html#Quoting-metacharacters" rel="nofollow">perldoc - Quoting metacharacters</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> quotemeta in action</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$x="[a].b+c^"; print quotemeta $x<span class="pl-pds">'</span></span>
<span class="pl-cce">\[</span>a<span class="pl-cce">\]\.</span>b<span class="pl-cce">\+</span>c<span class="pl-cce">\^</span>

$ <span class="pl-c"><span class="pl-c">#</span> same as: s='a+b' perl -ne 'print if index($_, $ENV{s})==0' eqns.txt</span>
$ s=<span class="pl-s"><span class="pl-pds">'</span>a+b<span class="pl-pds">'</span></span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if /^\Q$ENV{s}/<span class="pl-pds">'</span></span> eqns.txt
a+b,pi=3.14,5e12

$ s=<span class="pl-s"><span class="pl-pds">'</span>a+b<span class="pl-pds">'</span></span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/^\Q$ENV{s}/ABC/<span class="pl-pds">'</span></span> eqns.txt
a=b,a-b=c,c<span class="pl-k">*</span>d
ABC,pi=3.14,5e12
i<span class="pl-k">*</span>(t+9-g)/8,4-a+b

$ s=<span class="pl-s"><span class="pl-pds">'</span>a+b<span class="pl-pds">'</span></span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/\Q$ENV{s}\E.*,/ABC,/<span class="pl-pds">'</span></span> eqns.txt
a=b,a-b=c,c<span class="pl-k">*</span>d
ABC,5e12
i<span class="pl-k">*</span>(t+9-g)/8,4-a+b</pre></div>
<ul>
<li>use <code>q</code> operator for replacement section</li>
<li>it would treat contents as if they were placed inside single quotes and hence no interpolation</li>
<li>See also <a href="https://perldoc.perl.org/5.8.8/perlop.html#Quote-and-Quote-like-Operators" rel="nofollow">perldoc - Quote and Quote-like Operators</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> q in action</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$x="[a].b+c^$@123"; print $x<span class="pl-pds">'</span></span>
[a].b+c^123
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$x=q([a].b+c^$@123); print $x<span class="pl-pds">'</span></span>
[a].b+c^<span class="pl-smi">$@</span>123
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$x=q([a].b+c^$@123); print quotemeta $x<span class="pl-pds">'</span></span>
<span class="pl-cce">\[</span>a<span class="pl-cce">\]\.</span>b<span class="pl-cce">\+</span>c<span class="pl-cce">\^\$\@</span>123

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo 123<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/foo/$foo/<span class="pl-pds">'</span></span>
 123
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo 123<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/foo/q($foo)/e<span class="pl-pds">'</span></span>
<span class="pl-smi">$foo</span> 123
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo 123<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/foo/q{$f)oo}/e<span class="pl-pds">'</span></span>
<span class="pl-smi">$f</span>)oo 123

$ <span class="pl-c"><span class="pl-c">#</span> string saved in other variables do not need special attention</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo 123<span class="pl-pds">'</span></span> <span class="pl-k">|</span> s=<span class="pl-s"><span class="pl-pds">'</span>a$b<span class="pl-pds">'</span></span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/foo/$ENV{s}/<span class="pl-pds">'</span></span>
a<span class="pl-smi">$b</span> 123
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo 123<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -pe <span class="pl-s"><span class="pl-pds">'</span>s/foo/a$b/<span class="pl-pds">'</span></span>
a 123</pre></div>
<br>
<h4><a href="#matching-position" aria-hidden="true" class="anchor" id="user-content-matching-position"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-matching-position"></a>Matching position</h4>
<ul>
<li>From <a href="https://perldoc.perl.org/perlvar.html#SPECIAL-VARIABLES" rel="nofollow">perldoc - perlvar</a></li>
</ul>
<blockquote>
<p>$-[0] is the offset of the start of the last successful match</p>
</blockquote>
<blockquote>
<p>$+[0] is the offset into the string of the end of the entire match</p>
</blockquote>
<div class="highlight highlight-source-shell"><pre>$ cat poem.txt
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.

$ <span class="pl-c"><span class="pl-c">#</span> starting position of match</span>
$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>print "line: $., offset: $-[0]" if /are/<span class="pl-pds">'</span></span> poem.txt
line: 1, offset: 6
line: 2, offset: 8
line: 4, offset: 7
$ <span class="pl-c"><span class="pl-c">#</span> if offset is needed starting from 1 instead of 0</span>
$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>print "line: $., offset: ",$-[0]+1 if /are/<span class="pl-pds">'</span></span> poem.txt
line: 1, offset: 7
line: 2, offset: 9
line: 4, offset: 8

$ <span class="pl-c"><span class="pl-c">#</span> ending position of match</span>
$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>print "line: $., offset: $+[0]" if /are/<span class="pl-pds">'</span></span> poem.txt
line: 1, offset: 9
line: 2, offset: 11
line: 4, offset: 10</pre></div>
<ul>
<li>for multiple matches, use <code>while</code> loop to go over all the matches</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>print "$.:$&amp;:$-[0]" while /is|so|are/g<span class="pl-pds">'</span></span> poem.txt
1:are:6
2:are:8
3:is:6
4:so:4
4:are:7</pre></div>
<br>
<h2><a href="#using-modules" aria-hidden="true" class="anchor" id="user-content-using-modules"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-using-modules"></a>Using modules</h2>
<ul>
<li>There are many standard modules available that come with Perl installation</li>
<li>and many more available from <strong>Comprehensive Perl Archive Network</strong> (CPAN)
<ul>
<li><a href="https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module" rel="nofollow">stackoverflow - easiest way to install a missing module</a></li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>34,17,6<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F, -lane <span class="pl-s"><span class="pl-pds">'</span>BEGIN{use List::Util qw(max)} print max @F<span class="pl-pds">'</span></span>
34
$ <span class="pl-c"><span class="pl-c">#</span> -M option provides a way to specify modules from command line</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>34,17,6<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -MList::Util=max -F, -lane <span class="pl-s"><span class="pl-pds">'</span>print max @F<span class="pl-pds">'</span></span>
34
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>34,17,6<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -MList::Util=sum0 -F, -lane <span class="pl-s"><span class="pl-pds">'</span>print sum0 @F<span class="pl-pds">'</span></span>
57
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>34,17,6<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -MList::Util=product -F, -lane <span class="pl-s"><span class="pl-pds">'</span>print product @F<span class="pl-pds">'</span></span>
3468

$ s=<span class="pl-s"><span class="pl-pds">'</span>1,2,3,4,5<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -MList::Util=shuffle -F, -lane <span class="pl-s"><span class="pl-pds">'</span>print join ",",shuffle @F<span class="pl-pds">'</span></span>
5,3,4,1,2

$ s=<span class="pl-s"><span class="pl-pds">'</span>3,b,a,c,d,1,d,c,2,3,1,b<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -MList::MoreUtils=uniq -F, -lane <span class="pl-s"><span class="pl-pds">'</span>print join ",",uniq @F<span class="pl-pds">'</span></span>
3,b,a,c,d,1,2

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo 123 baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> base64
Zm9vIDEyMyBiYXoK
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foo 123 baz<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -MMIME::Base64 -ne <span class="pl-s"><span class="pl-pds">'</span>print encode_base64 $_<span class="pl-pds">'</span></span>
Zm9vIDEyMyBiYXoK
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Zm9vIDEyMyBiYXoK<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -MMIME::Base64 -ne <span class="pl-s"><span class="pl-pds">'</span>print decode_base64 $_<span class="pl-pds">'</span></span> 
foo 123 baz</pre></div>
<ul>
<li>a cool module <a href="https://perldoc.perl.org/O.html" rel="nofollow">O</a> helps to convert one-liners to full fledged programs
<ul>
<li>similar to <code>-o</code> option for GNU awk</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -MO=Deparse -ne <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){$h{$_}=1; next}</span>
<span class="pl-s">            print if $h{$_}<span class="pl-pds">'</span></span> colors_1.txt colors_2.txt
LINE: <span class="pl-k">while</span> (defined(<span class="pl-smi">$_</span> = <span class="pl-k">&lt;</span>ARGV<span class="pl-k">&gt;</span>)) {
    unless (<span class="pl-smi">$#</span>ARGV) {
        <span class="pl-smi">$h</span>{<span class="pl-smi">$_</span>} = 1<span class="pl-k">;</span>
        next<span class="pl-k">;</span>
    }
    print <span class="pl-smi">$_</span> <span class="pl-k">if</span> <span class="pl-smi">$h</span>{<span class="pl-smi">$_</span>}<span class="pl-k">;</span>
}
-e syntax OK

$ perl -MO=Deparse -00 -ne <span class="pl-s"><span class="pl-pds">'</span>print if /it/<span class="pl-pds">'</span></span> sample.txt
BEGIN { $/ = <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span><span class="pl-k">;</span> $<span class="pl-cce">\ </span>= undef<span class="pl-k">;</span> }
LINE: <span class="pl-k">while</span> (defined(<span class="pl-smi">$_</span> = <span class="pl-k">&lt;</span>ARGV<span class="pl-k">&gt;</span>)) {
    print <span class="pl-smi">$_</span> <span class="pl-k">if</span> /it/<span class="pl-k">;</span>
}
-e syntax OK</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://perldoc.perl.org/perlmodlib.html" rel="nofollow">perldoc - perlmodlib</a></li>
<li><a href="https://perldoc.perl.org/index-modules-L.html" rel="nofollow">perldoc - Core modules</a></li>
<li><a href="https://unix.stackexchange.com/questions/310840/better-solution-for-finding-id-groups-permutations-combinations" rel="nofollow">unix.stackexchange - example for Algorithm::Combinatorics</a></li>
<li><a href="https://unix.stackexchange.com/questions/319301/excluding-enclosed-delimiters-with-cut" rel="nofollow">unix.stackexchange - example for Text::ParseWords</a></li>
<li><a href="https://stackoverflow.com/questions/3258847/what-are-good-perl-pattern-matching-regex-modules" rel="nofollow">stackoverflow - regular expression modules</a></li>
<li><a href="https://metacpan.org/pod/String::Approx" rel="nofollow">metacpan - String::Approx</a> - Perl extension for approximate matching (fuzzy matching)</li>
<li><a href="https://metacpan.org/pod/Tie::IxHash" rel="nofollow">metacpan - Tie::IxHash</a> - ordered associative arrays for Perl</li>
</ul>
<br>
<h2><a href="#two-file-processing" aria-hidden="true" class="anchor" id="user-content-two-file-processing"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-two-file-processing"></a>Two file processing</h2>
<p>First, a bit about <code>$#ARGV</code> and hash variables</p>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> $#ARGV can be used to know which file is being processed</span>
$ perl -lne <span class="pl-s"><span class="pl-pds">'</span>print $#ARGV<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">&lt;(</span>seq 2<span class="pl-pds">)</span></span> <span class="pl-s"><span class="pl-pds">&lt;(</span>seq 3<span class="pl-pds">)</span></span> <span class="pl-s"><span class="pl-pds">&lt;(</span>seq 1<span class="pl-pds">)</span></span>
1
1
0
0
0
-1

$ <span class="pl-c"><span class="pl-c">#</span> creating hash variable</span>
$ <span class="pl-c"><span class="pl-c">#</span> checking if a key is present using exists</span>
$ <span class="pl-c"><span class="pl-c">#</span> or if value is known to evaluate to true</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$h{"a"}=5; $h{"b"}=0; $h{1}="abc";</span>
<span class="pl-s">            print "key:a value=", $h{"a"};</span>
<span class="pl-s">            print "key:b present" if exists $h{"b"};</span>
<span class="pl-s">            print "key:1 present" if $h{1}<span class="pl-pds">'</span></span>
key:a value=5
key:b present
key:1 present</pre></div>
<br>
<h4><a href="#comparing-whole-lines" aria-hidden="true" class="anchor" id="user-content-comparing-whole-lines"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-comparing-whole-lines"></a>Comparing whole lines</h4>
<p>Consider the following test files</p>
<div class="highlight highlight-source-shell"><pre>$ cat colors_1.txt
Blue
Brown
Purple
Red
Teal
Yellow

$ cat colors_2.txt
Black
Blue
Green
Red
White</pre></div>
<ul>
<li>For two files as input, <code>$#ARGV</code> will be <code>0</code> only when first file is being processed</li>
<li>Using <code>next</code> will skip rest of code</li>
<li>entire line is used as key</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> common lines</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: grep -Fxf colors_1.txt colors_2.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$0]; next} $0 in a' colors_1.txt colors_2.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){$h{$_}=1; next}</span>
<span class="pl-s">            print if $h{$_}<span class="pl-pds">'</span></span> colors_1.txt colors_2.txt
Blue
Red

$ <span class="pl-c"><span class="pl-c">#</span> lines from colors_2.txt not present in colors_1.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: grep -vFxf colors_1.txt colors_2.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$0]; next} !($0 in a)' colors_1.txt colors_2.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){$h{$_}=1; next}</span>
<span class="pl-s">            print if !$h{$_}<span class="pl-pds">'</span></span> colors_1.txt colors_2.txt
Black
Green
White</pre></div>
<ul>
<li>alternative constructs</li>
<li><code>&lt;FILEHANDLE&gt;</code> reads line(s) from the specified file
<ul>
<li>defaults to current file argument(includes stdin as well), so <code>&lt;&gt;</code> can be used as shortcut</li>
<li><code>&lt;STDIN&gt;</code> will read only from stdin, there are also predefined handles for stdout/stderr</li>
<li>in list context, all the lines would be read</li>
<li>See <a href="https://perldoc.perl.org/perlop.html#I%2fO-Operators" rel="nofollow">perldoc - I/O Operators</a> for details</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> using if-else instead of next</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $h{$_}=1 }</span>
<span class="pl-s">            else{ print if $h{$_} }<span class="pl-pds">'</span></span> colors_1.txt colors_2.txt
Blue
Red

$ <span class="pl-c"><span class="pl-c">#</span> read all lines of first file in BEGIN block</span>
$ <span class="pl-c"><span class="pl-c">#</span> &lt;&gt; reads a line from current file argument</span>
$ <span class="pl-c"><span class="pl-c">#</span> eof will ensure only first file is read</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{ $h{&lt;&gt;}=1 while !eof; }</span>
<span class="pl-s">            print if $h{$_}<span class="pl-pds">'</span></span> colors_1.txt colors_2.txt
Blue
Red
$ <span class="pl-c"><span class="pl-c">#</span> this method also allows to easily reset line number</span>
$ <span class="pl-c"><span class="pl-c">#</span> close ARGV is similar to calling nextfile in GNU awk</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{ $h{&lt;&gt;}=1 while !eof; close ARGV}</span>
<span class="pl-s">            print "$.\n" if $h{$_}<span class="pl-pds">'</span></span> colors_1.txt colors_2.txt
2
4

$ <span class="pl-c"><span class="pl-c">#</span> or pass 1st file content as STDIN, $. will be automatically reset as well</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{ $h{$_}=1 while &lt;STDIN&gt; }</span>
<span class="pl-s">            print if $h{$_}<span class="pl-pds">'</span></span> <span class="pl-k">&lt;</span>colors_1.txt colors_2.txt
Blue
Red</pre></div>
<br>
<h4><a href="#comparing-specific-fields" aria-hidden="true" class="anchor" id="user-content-comparing-specific-fields"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-comparing-specific-fields"></a>Comparing specific fields</h4>
<p>Consider the sample input file</p>
<div class="highlight highlight-source-shell"><pre>$ cat marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59
ECE     Om      92
CSE     Amy     67</pre></div>
<ul>
<li>single field</li>
<li>For ex: only first field comparison instead of entire line as key</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat list1
ECE
CSE

$ <span class="pl-c"><span class="pl-c">#</span> extract only lines matching first field specified in list1</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$1]; next} $1 in a' list1 marks.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $h{$F[0]}=1 }</span>
<span class="pl-s">             else{ print if $h{$F[0]} }<span class="pl-pds">'</span></span> list1 marks.txt
ECE     Raj     53
ECE     Joel    72
CSE     Surya   81
ECE     Om      92
CSE     Amy     67

$ <span class="pl-c"><span class="pl-c">#</span> if header is needed as well</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$1]; next} FNR==1 || $1 in a' list1 marks.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $h{$F[0]}=1; $.=0 }</span>
<span class="pl-s">             else{ print if $h{$F[0]} || $.==1 }<span class="pl-pds">'</span></span> list1 marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
CSE     Surya   81
ECE     Om      92
CSE     Amy     67</pre></div>
<ul>
<li>multiple field comparison</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat list2
EEE Moi
CSE Amy
ECE Raj

$ <span class="pl-c"><span class="pl-c">#</span> extract only lines matching both fields specified in list2</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$1,$2]; next} ($1,$2) in a' list2 marks.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> default SUBSEP(stored in $;) is \034, same as GNU awk</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $h{$F[0],$F[1]}=1 }</span>
<span class="pl-s">             else{ print if $h{$F[0],$F[1]} }<span class="pl-pds">'</span></span> list2 marks.txt
ECE     Raj     53
EEE     Moi     68
CSE     Amy     67

$ <span class="pl-c"><span class="pl-c">#</span> or use multidimensional hash</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $h{$F[0]}{$F[1]}=1 }</span>
<span class="pl-s">             else{ print if $h{$F[0]}{$F[1]} }<span class="pl-pds">'</span></span> list2 marks.txt
ECE     Raj     53
EEE     Moi     68
CSE     Amy     67</pre></div>
<ul>
<li>field and value comparison</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat list3
ECE 70
EEE 65
CSE 80

$ <span class="pl-c"><span class="pl-c">#</span> extract line matching Dept and minimum marks specified in list3</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{d[$1]; m[$1]=$2; next} $1 in d &amp;&amp; $3 &gt;= m[$1]'</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $d{$F[0]}=1; $m{$F[0]}=$F[1] }</span>
<span class="pl-s">             else{ print if $d{$F[0]} &amp;&amp; $F[2]&gt;=$m{$F[0]} }<span class="pl-pds">'</span></span> list3 marks.txt
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
ECE     Om      92</pre></div>
<ul>
<li>See also <a href="https://stackoverflow.com/questions/42239179/fastest-way-to-find-lines-of-a-text-file-from-another-larger-text-file-in-bash" rel="nofollow">stackoverflow - Fastest way to find lines of a text file from another larger text file</a></li>
</ul>
<br>
<h4><a href="#line-number-matching" aria-hidden="true" class="anchor" id="user-content-line-number-matching"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-line-number-matching"></a>Line number matching</h4>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> replace mth line in poem.txt with nth line from nums.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v m=3 -v n=2 'BEGIN{while(n-- &gt; 0) getline s &lt; "nums.txt"}</span>
$ <span class="pl-c"><span class="pl-c">#</span>                             FNR==m{$0=s} 1' poem.txt</span>
$ m=3 n=2 perl -pe <span class="pl-s"><span class="pl-pds">'</span>BEGIN{ $s=&lt;&gt; while $ENV{n}-- &gt; 0; close ARGV}</span>
<span class="pl-s">                    $_=$s if $.==$ENV{m}<span class="pl-pds">'</span></span> nums.txt poem.txt
Roses are red,
Violets are blue,
-2
And so are you.

$ <span class="pl-c"><span class="pl-c">#</span> print line from fruits.txt if corresponding line from nums.txt is +ve number</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v file='nums.txt' '{getline num &lt; file; if(num&gt;0) print}'</span>
$ file=<span class="pl-s"><span class="pl-pds">'</span>nums.txt<span class="pl-pds">'</span></span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>BEGIN{open($f,$ENV{file})}</span>
<span class="pl-s">                            $num=&lt;$f&gt;; print if $num&gt;0<span class="pl-pds">'</span></span> fruits.txt
fruit   qty
banana  31
$ <span class="pl-c"><span class="pl-c">#</span> or pass contents of nums.txt as standard input</span>
$ <span class="pl-k">&lt;</span>nums.txt perl -ne <span class="pl-s"><span class="pl-pds">'</span>$num=&lt;STDIN&gt;; print if $num&gt;0<span class="pl-pds">'</span></span> fruits.txt
fruit   qty
banana  31</pre></div>
<br>
<h2><a href="#creating-new-fields" aria-hidden="true" class="anchor" id="user-content-creating-new-fields"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-creating-new-fields"></a>Creating new fields</h2>
<ul>
<li>Number of fields in input record can be changed by simply manipulating <code>$#F</code></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>foo,bar,123,baz<span class="pl-pds">'</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> reducing fields</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -F, -v OFS=, '{NF=2} 1'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -F, -lane <span class="pl-s"><span class="pl-pds">'</span>$,=","; $#F=1; print @F<span class="pl-pds">'</span></span>
foo,bar

$ <span class="pl-c"><span class="pl-c">#</span> creating new empty field(s)</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -F, -v OFS=, '{NF=5} 1'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -F, -lane <span class="pl-s"><span class="pl-pds">'</span>$,=","; $#F=4; print @F<span class="pl-pds">'</span></span>
foo,bar,123,baz,

$ <span class="pl-c"><span class="pl-c">#</span> assigning to field greater than $#F will create empty fields as needed</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -F, -v OFS=, '{$7=42} 1'</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -F, -lane <span class="pl-s"><span class="pl-pds">'</span>$,=","; $F[6]=42; print @F<span class="pl-pds">'</span></span>
foo,bar,123,baz,,,42</pre></div>
<ul>
<li>adding a field based on existing fields
<ul>
<li>See also <a href="#split">split</a> and <a href="#array-operations">Array operations</a> sections</li>
</ul>
</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> adding a new 'Grade' field</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'BEGIN{OFS="\t"; split("DCBAS",g,//)}</span>
$ <span class="pl-c"><span class="pl-c">#</span>          {NF++; $NF = NR==1 ? "Grade" : g[int($(NF-1)/10)-4]} 1' marks.txt</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$,="\t"; @g = split //, "DCBAS"} $#F++;</span>
<span class="pl-s">              $F[-1] = $.==1 ? "Grade" : $g[$F[-2]/10 - 5]; print @F<span class="pl-pds">'</span></span> marks.txt
Dept    Name    Marks   Grade
ECE     Raj     53      D
ECE     Joel    72      B
EEE     Moi     68      C
CSE     Surya   81      A
EEE     Tia     59      D
ECE     Om      92      S
CSE     Amy     67      C

$ <span class="pl-c"><span class="pl-c">#</span> alternate syntax: array initialization and appending array element</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>BEGIN{$,="\t"; @g = qw(D C B A S)}</span>
<span class="pl-s">              push @F, $.==1 ? "Grade" : $g[$F[-1]/10 - 5]; print @F<span class="pl-pds">'</span></span> marks.txt</pre></div>
<ul>
<li>two file example</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat list4
Raj class_rep
Amy sports_rep
Tia placement_rep

$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -v OFS='\t' 'NR==FNR{r[$1]=$2; next}</span>
$ <span class="pl-c"><span class="pl-c">#</span>          {NF++; $NF = FNR==1 ? "Role" : $NF=r[$2]} 1' list4 marks.txt</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $r{$F[0]}=$F[1]; $.=0 }</span>
<span class="pl-s">              else{ push @F, $.==1 ? "Role" : $r{$F[1]};</span>
<span class="pl-s">                    print join "\t", @F }<span class="pl-pds">'</span></span> list4 marks.txt
Dept    Name    Marks   Role
ECE     Raj     53      class_rep
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59      placement_rep
ECE     Om      92
CSE     Amy     67      sports_rep</pre></div>
<br>
<h2><a href="#dealing-with-duplicates" aria-hidden="true" class="anchor" id="user-content-dealing-with-duplicates"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-dealing-with-duplicates"></a>Dealing with duplicates</h2>
<ul>
<li>retain only first copy of duplicates</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat duplicates.txt
abc  7   4
food toy <span class="pl-k">****</span>
abc  7   4
<span class="pl-c1">test</span> toy 123
good toy <span class="pl-k">****</span>

$ <span class="pl-c"><span class="pl-c">#</span> whole line, same as: awk '!seen[$0]++' duplicates.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if !$seen{$_}++<span class="pl-pds">'</span></span> duplicates.txt
abc  7   4
food toy <span class="pl-k">****</span>
<span class="pl-c1">test</span> toy 123
good toy <span class="pl-k">****</span>

$ <span class="pl-c"><span class="pl-c">#</span> particular column, same as: awk '!seen[$2]++' duplicates.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if !$seen{$F[1]}++<span class="pl-pds">'</span></span> duplicates.txt
abc  7   4
food toy <span class="pl-k">****</span>

$ <span class="pl-c"><span class="pl-c">#</span> total count, same as: awk '!seen[$2]++{c++} END{print +c}' duplicates.txt</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>$c++ if !$seen{$F[1]}++; END{print $c+0}<span class="pl-pds">'</span></span> duplicates.txt
2</pre></div>
<ul>
<li>if input is so large that integer numbers can overflow</li>
<li>See also <a href="https://perldoc.perl.org/bignum.html" rel="nofollow">perldoc - bignum</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print "equal" if</span>
<span class="pl-s">   102**33==1922231403943151831696327756255167543169267432774552016351387451392<span class="pl-pds">'</span></span>
$ <span class="pl-c"><span class="pl-c">#</span> -M option here enables the use of bignum module</span>
$ perl -Mbignum -le <span class="pl-s"><span class="pl-pds">'</span>print "equal" if</span>
<span class="pl-s">   102**33==1922231403943151831696327756255167543169267432774552016351387451392<span class="pl-pds">'</span></span>
equal

$ <span class="pl-c"><span class="pl-c">#</span> avoid unnecessary counting altogether</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '!($2 in seen); {seen[$2]}' duplicates.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if !$seen{$F[1]}; $seen{$F[1]}=1<span class="pl-pds">'</span></span> duplicates.txt
abc  7   4
food toy <span class="pl-k">****</span>

$ <span class="pl-c"><span class="pl-c">#</span> same as: awk -M '!($2 in seen){c++} {seen[$2]} END{print +c}' duplicates.txt</span>
$ perl -Mbignum -lane <span class="pl-s"><span class="pl-pds">'</span>$c++ if !$seen{$F[1]}; $seen{$F[1]}=1;</span>
<span class="pl-s">                       END{print $c+0}<span class="pl-pds">'</span></span> duplicates.txt
2</pre></div>
<ul>
<li>multiple fields</li>
<li>See also <a href="https://unix.stackexchange.com/questions/325619/delete-lines-that-contain-the-same-information-but-in-different-order" rel="nofollow">unix.stackexchange - based on same fields that could be in different order</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '!seen[$2,$3]++' duplicates.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> default SUBSEP(stored in $;) is \034, same as GNU awk</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if !$seen{$F[1],$F[2]}++<span class="pl-pds">'</span></span> duplicates.txt
abc  7   4
food toy <span class="pl-k">****</span>
<span class="pl-c1">test</span> toy 123

$ <span class="pl-c"><span class="pl-c">#</span> or use multidimensional key</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if !$seen{$F[1]}{$F[2]}++<span class="pl-pds">'</span></span> duplicates.txt
abc  7   4
food toy <span class="pl-k">****</span>
<span class="pl-c1">test</span> toy 123</pre></div>
<ul>
<li>retaining specific copy</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> second occurrence of duplicate</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '++seen[$2]==2' duplicates.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if ++$seen{$F[1]}==2<span class="pl-pds">'</span></span> duplicates.txt
abc  7   4
<span class="pl-c1">test</span> toy 123

$ <span class="pl-c"><span class="pl-c">#</span> third occurrence of duplicate</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '++seen[$2]==3' duplicates.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if ++$seen{$F[1]}==3<span class="pl-pds">'</span></span> duplicates.txt
good toy <span class="pl-k">****</span>

$ <span class="pl-c"><span class="pl-c">#</span> retaining only last copy of duplicate</span>
$ <span class="pl-c"><span class="pl-c">#</span> reverse the input line-wise, retain first copy and then reverse again</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: tac duplicates.txt | awk '!seen[$2]++' | tac</span>
$ tac duplicates.txt <span class="pl-k">|</span> perl -ane <span class="pl-s"><span class="pl-pds">'</span>print if !$seen{$F[1]}++<span class="pl-pds">'</span></span> <span class="pl-k">|</span> tac
abc  7   4
good toy <span class="pl-k">****</span></pre></div>
<ul>
<li>filtering based on duplicate count</li>
<li>allows to emulate <a href="/learnbyexample/Command-line-text-processing/blob/master/sorting_stuff.md#uniq">uniq</a> command for specific fields</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> all duplicates based on 1st column</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$1]++; next} a[$1]&gt;1' duplicates.txt duplicates.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $x{$F[0]}++ }</span>
<span class="pl-s">             else{ print if $x{$F[0]}&gt;1 }<span class="pl-pds">'</span></span> duplicates.txt duplicates.txt
abc  7   4
abc  7   4

$ <span class="pl-c"><span class="pl-c">#</span> more than 2 duplicates based on 2nd column</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$2]++; next} a[$2]&gt;2' duplicates.txt duplicates.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $x{$F[1]}++ }</span>
<span class="pl-s">             else{ print if $x{$F[1]}&gt;2 }<span class="pl-pds">'</span></span> duplicates.txt duplicates.txt
food toy <span class="pl-k">****</span>
<span class="pl-c1">test</span> toy 123
good toy <span class="pl-k">****</span>

$ <span class="pl-c"><span class="pl-c">#</span> only unique lines based on 3rd column</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk 'NR==FNR{a[$3]++; next} a[$3]==1' duplicates.txt duplicates.txt</span>
$ perl -ane <span class="pl-s"><span class="pl-pds">'</span>if(!$#ARGV){ $x{$F[2]}++ }</span>
<span class="pl-s">             else{ print if $x{$F[2]}==1 }<span class="pl-pds">'</span></span> duplicates.txt duplicates.txt
<span class="pl-c1">test</span> toy 123</pre></div>
<br>
<h2><a href="#lines-between-two-regexps" aria-hidden="true" class="anchor" id="user-content-lines-between-two-regexps"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-lines-between-two-regexps"></a>Lines between two REGEXPs</h2>
<ul>
<li>This section deals with filtering lines bound by two <em>REGEXP</em>s (referred to as blocks)</li>
<li>For simplicity the two <em>REGEXP</em>s usually used in below examples are the strings <strong>BEGIN</strong> and <strong>END</strong></li>
</ul>
<br>
<h4><a href="#all-unbroken-blocks" aria-hidden="true" class="anchor" id="user-content-all-unbroken-blocks"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-all-unbroken-blocks"></a>All unbroken blocks</h4>
<p>Consider the below sample input file, which doesn't have any unbroken blocks (i.e <strong>BEGIN</strong> and <strong>END</strong> are always present in pairs)</p>
<div class="highlight highlight-source-shell"><pre>$ cat range.txt 
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
END
baz</pre></div>
<ul>
<li>Extracting lines between starting and ending <em>REGEXP</em></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> include both starting/ending REGEXP</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/BEGIN/{f=1} f; /END/{f=0}' range.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1 if /BEGIN/; print if $f; $f=0 if /END/<span class="pl-pds">'</span></span> range.txt
BEGIN
1234
6789
END
BEGIN
a
b
c
END

$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -ne 'print if /BEGIN/../END/' range.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> which is similar to sed -n '/BEGIN/,/END/p'</span>
$ <span class="pl-c"><span class="pl-c">#</span> but not suitable to extend for other cases</span></pre></div>
<ul>
<li>other variations</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/END/{f=0} f; /BEGIN/{f=1}' range.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=0 if /END/; print if $f; $f=1 if /BEGIN/<span class="pl-pds">'</span></span> range.txt
1234
6789
a
b
c

$ <span class="pl-c"><span class="pl-c">#</span> check out what these do:</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1 if /BEGIN/; $f=0 if /END/; print if $f<span class="pl-pds">'</span></span> range.txt
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if $f; $f=0 if /END/; $f=1 if /BEGIN/<span class="pl-pds">'</span></span> range.txt</pre></div>
<ul>
<li>Extracting lines other than lines between the two <em>REGEXP</em>s</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/BEGIN/{f=1} !f; /END/{f=0}' range.txt</span>
$ <span class="pl-c"><span class="pl-c">#</span> can also use: perl -ne 'print if !(/BEGIN/../END/)' range.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1 if /BEGIN/; print if !$f; $f=0 if /END/<span class="pl-pds">'</span></span> range.txt
foo
bar
baz

$ <span class="pl-c"><span class="pl-c">#</span> the other three cases would be</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=0 if /END/; print if !$f; $f=1 if /BEGIN/<span class="pl-pds">'</span></span> range.txt
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>print if !$f; $f=1 if /BEGIN/; $f=0 if /END/<span class="pl-pds">'</span></span> range.txt
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1 if /BEGIN/; $f=0 if /END/; print if !$f<span class="pl-pds">'</span></span> range.txt</pre></div>
<br>
<h4><a href="#specific-blocks" aria-hidden="true" class="anchor" id="user-content-specific-blocks"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-specific-blocks"></a>Specific blocks</h4>
<ul>
<li>Getting first block</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/BEGIN/{f=1} f; /END/{exit}' range.txt </span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1 if /BEGIN/; print if $f; exit if /END/<span class="pl-pds">'</span></span> range.txt
BEGIN
1234
6789
END

$ <span class="pl-c"><span class="pl-c">#</span> use other tricks discussed in previous section as needed</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/END/{exit} f; /BEGIN/{f=1}' range.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>exit if /END/; print if $f; $f=1 if /BEGIN/<span class="pl-pds">'</span></span> range.txt
1234
6789</pre></div>
<ul>
<li>Getting last block</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> reverse input linewise, change the order of REGEXPs, finally reverse again</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: tac range.txt | awk '/END/{f=1} f; /BEGIN/{exit}' | tac</span>
$ tac range.txt <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1 if /END/; print if $f; exit if /BEGIN/<span class="pl-pds">'</span></span> <span class="pl-k">|</span> tac
BEGIN
a
b
c
END

$ <span class="pl-c"><span class="pl-c">#</span> or, save the blocks in a buffer and print the last one alone</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/4/{f=1; b=$0; next} f{b=b ORS $0} /6/{f=0} END{print b}'</span>
$ seq 30 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>if(/4/){$f=1; $b=$_; next}</span>
<span class="pl-s">                     $b.=$_ if $f; $f=0 if /6/; END{print $b}<span class="pl-pds">'</span></span>
24
25
26</pre></div>
<ul>
<li>Getting blocks based on a counter</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> get only 2nd block</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: seq 30 | awk -v b=2 '/4/{c++} c==b{print; if(/6/) exit}'</span>
$ seq 30 <span class="pl-k">|</span> b=2 perl -ne <span class="pl-s"><span class="pl-pds">'</span>$c++ if /4/; if($c==$ENV{b}){print; exit if /6/}<span class="pl-pds">'</span></span>
14
15
16

$ <span class="pl-c"><span class="pl-c">#</span> to get all blocks greater than 'b' blocks</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: seq 30 | awk -v b=1 '/4/{f=1; c++} f &amp;&amp; c&gt;b; /6/{f=0}'</span>
$ seq 30 <span class="pl-k">|</span> b=1 perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1, $c++ if /4/;</span>
<span class="pl-s">                         print if $f &amp;&amp; $c&gt;$ENV{b}; $f=0 if /6/<span class="pl-pds">'</span></span>
14
15
16
24
25
26</pre></div>
<ul>
<li>excluding a particular block</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> excludes 2nd block</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: seq 30 | awk -v b=2 '/4/{f=1; c++} f &amp;&amp; c!=b; /6/{f=0}'</span>
$ seq 30 <span class="pl-k">|</span> b=2 perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1, $c++ if /4/;</span>
<span class="pl-s">                         print if $f &amp;&amp; $c!=$ENV{b}; $f=0 if /6/<span class="pl-pds">'</span></span>
4
5
6
24
25
26</pre></div>
<ul>
<li>extract block only if matches another string as well</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>if(/BEGIN/){$f=1; $m=0; $b=""}; $m=1 if $f &amp;&amp; /23/;</span>
<span class="pl-s">            $b.=$_ if $f; if(/END/){print $b if $m; $f=0}<span class="pl-pds">'</span></span> range.txt 
BEGIN
1234
6789
END

$ seq 30 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>if(/4/){$f=1; $m=0; $b=""}; $m=1 if $f &amp;&amp; /^(5|25)$/;</span>
<span class="pl-s">                     $b.=$_ if $f; if(/6/){print $b if $m; $f=0}<span class="pl-pds">'</span></span>
4
5
6
24
25
26</pre></div>
<br>
<h4><a href="#broken-blocks" aria-hidden="true" class="anchor" id="user-content-broken-blocks"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-broken-blocks"></a>Broken blocks</h4>
<ul>
<li>If there are blocks with ending <em>REGEXP</em> but without corresponding start, earlier techniques used will suffice</li>
<li>Consider the modified input file where starting <em>REGEXP</em> doesn't have corresponding ending</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat broken_range.txt
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
baz

$ <span class="pl-c"><span class="pl-c">#</span> the file reversing trick comes in handy here as well</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: tac broken_range.txt | awk '/END/{f=1} f; /BEGIN/{f=0}' | tac</span>
$ tac broken_range.txt <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>$f=1 if /END/;</span>
<span class="pl-s">                         print if $f; $f=0 if /BEGIN/<span class="pl-pds">'</span></span> <span class="pl-k">|</span> tac
BEGIN
1234
6789
END</pre></div>
<ul>
<li>But if both kinds of broken blocks are present, for ex:</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat multiple_broken.txt 
qqqqqqq
BEGIN
foo
BEGIN
1234
6789
END
bar
END
0-42-1
BEGIN
a
BEGIN
b
END
<span class="pl-k">;</span>as<span class="pl-k">;</span>s<span class="pl-k">;</span>sd<span class="pl-k">;</span></pre></div>
<p>then use buffers to accumulate the records and print accordingly</p>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> same as: awk '/BEGIN/{f=1; buf=$0; next} f{buf=buf ORS $0}</span>
$ <span class="pl-c"><span class="pl-c">#</span>          /END/{f=0; if(buf) print buf; buf=""}' multiple_broken.txt</span>
$ perl -ne <span class="pl-s"><span class="pl-pds">'</span>if(/BEGIN/){$f=1; $b=$_; next} $b.=$_ if $f;</span>
<span class="pl-s">            if(/END/){$f=0; print $b if $b; $b=""}<span class="pl-pds">'</span></span> multiple_broken.txt
BEGIN
1234
6789
END
BEGIN
b
END

$ <span class="pl-c"><span class="pl-c">#</span> note how buffer is initialized as well as cleared</span>
$ <span class="pl-c"><span class="pl-c">#</span> on matching beginning/end REGEXPs respectively</span>
$ <span class="pl-c"><span class="pl-c">#</span> 'undef $b' can also be used here instead of $b=""</span></pre></div>
<br>
<h2><a href="#array-operations" aria-hidden="true" class="anchor" id="user-content-array-operations"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-array-operations"></a>Array operations</h2>
<ul>
<li>initialization</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> list example, each value is separated by comma</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>($x, $y) = (4, 5); print "$x:$y\n"<span class="pl-pds">'</span></span>
4:5

$ <span class="pl-c"><span class="pl-c">#</span> using list to initialize arrays, allows variable interpolation</span>
$ <span class="pl-c"><span class="pl-c">#</span> ($x, $y) = ($y, $x) will swap variables :)</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, 5, 84); print "@nums\n"<span class="pl-pds">'</span></span>
4 5 84
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, 5, 84, "foo"); print "@nums\n"<span class="pl-pds">'</span></span>
4 5 84 foo
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>$x=5; @y=(3, 2); @nums = ($x, "good", @y); print "@nums\n"<span class="pl-pds">'</span></span>
5 good 3 2

$ <span class="pl-c"><span class="pl-c">#</span> use qw to specify string elements separated by space, no interpolation</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>@nums = qw(4 5 84 "foo"); print "@nums\n"<span class="pl-pds">'</span></span>
4 5 84 <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>@nums = qw(a $x @y); print "@nums\n"<span class="pl-pds">'</span></span>
a <span class="pl-smi">$x</span> @y
$ <span class="pl-c"><span class="pl-c">#</span> use different delimiter as needed</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>@nums = qw/baz 1)foo/; print "@nums\n"<span class="pl-pds">'</span></span>
baz 1)foo</pre></div>
<ul>
<li>accessing individual elements</li>
<li>See also <a href="https://perldoc.perl.org/index-functions-by-cat.html#Functions-for-real-@ARRAYs" rel="nofollow">perldoc - functions for arrays</a> for push,pop,shift,unshift functions</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> index starts from 0</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, "foo", 2, "x"); print $nums[0]<span class="pl-pds">'</span></span>
4
$ <span class="pl-c"><span class="pl-c">#</span> note the use of $ when accessing individual element</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, "foo", 2, "x"); print $nums[2]<span class="pl-pds">'</span></span>
2
$ <span class="pl-c"><span class="pl-c">#</span> to access elements from end, use -ve index from -1</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, "foo", 2, "x"); print $nums[-1]<span class="pl-pds">'</span></span>
x

$ <span class="pl-c"><span class="pl-c">#</span> index of last element in array</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, "foo", 2, "x"); print $#nums<span class="pl-pds">'</span></span>
3
$ <span class="pl-c"><span class="pl-c">#</span> size of array, i.e total number of elements</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, "foo", 2, "x"); $s=@nums; print $s<span class="pl-pds">'</span></span>
4
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@nums = (4, "foo", 2, "x"); print scalar @nums<span class="pl-pds">'</span></span>
4</pre></div>
<ul>
<li>array slices</li>
<li>See also <a href="https://perldoc.perl.org/perlop.html#Range-Operators" rel="nofollow">perldoc - Range Operators</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> note the use of @ when accessing more than one element</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c d<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print "@F[0,-1,2]"<span class="pl-pds">'</span></span>
a d c
$ <span class="pl-c"><span class="pl-c">#</span> range operator</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c d<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print "@F[1..2]"<span class="pl-pds">'</span></span>
b c
$ <span class="pl-c"><span class="pl-c">#</span> rotating elements</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c d<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print "@F[1..$#F,0]"<span class="pl-pds">'</span></span>
b c d a

$ <span class="pl-c"><span class="pl-c">#</span> index needed can be given from another array too</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c d<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>@i=(3,1); print "@F[@i]"<span class="pl-pds">'</span></span>
d b

$ <span class="pl-c"><span class="pl-c">#</span> easy swapping of columns</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join "\t", @F[1,0]<span class="pl-pds">'</span></span> fruits.txt
qty     fruit
42      apple
31      banana
90      fig
6       guava</pre></div>
<ul>
<li>range operator also allows handy initialization</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@n = (12..17); print "@n"<span class="pl-pds">'</span></span>
12 13 14 15 16 17

$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@n = (l..ad); print "@n"<span class="pl-pds">'</span></span>
l m n o p q r s t u v w x y z aa ab ac ad</pre></div>
<br>
<h4><a href="#iteration-and-filtering" aria-hidden="true" class="anchor" id="user-content-iteration-and-filtering"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-iteration-and-filtering"></a>Iteration and filtering</h4>
<ul>
<li>See also <a href="https://stackoverflow.com/questions/47653826/awk-extracting-a-data-which-is-on-several-lines/47654406#47654406" rel="nofollow">stackoverflow - extracting multiline text and performing substitution</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> foreach will return each value one by one</span>
$ <span class="pl-c"><span class="pl-c">#</span> can also use 'for' keyword instead of 'foreach'</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print $_*2 foreach (12..14)<span class="pl-pds">'</span></span>
24
26
28

$ <span class="pl-c"><span class="pl-c">#</span> iterate using index</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@x = (a..e); foreach (0..$#x){print $x[$_]}<span class="pl-pds">'</span></span>
a
b
c
d
e

$ <span class="pl-c"><span class="pl-c">#</span> C-style for loop can be used as well</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@x = (a..c); for($i=0;$i&lt;=$#x;$i++){print $x[$i]}<span class="pl-pds">'</span></span>
a
b
c</pre></div>
<ul>
<li>use <code>grep</code> for filtering array elements based on a condition</li>
<li>See also <a href="https://unix.stackexchange.com/questions/397498/create-lists-of-words-according-to-binary-numbers/397504#397504" rel="nofollow">unix.stackexchange - extract specific fields and use corresponding header text</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> as usual, $_ will get the value each iteration</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$,=" "; print grep { /[35]/ } 2..26<span class="pl-pds">'</span></span>
3 5 13 15 23 25
$ <span class="pl-c"><span class="pl-c">#</span> alternate syntax</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$,=" "; print grep /[35]/, 2..26<span class="pl-pds">'</span></span>
3 5 13 15 23 25

$ <span class="pl-c"><span class="pl-c">#</span> to get index instead of matches</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>$,=" "; @n=(2..26); print grep {$n[$_]=~/[35]/} 0..$#n<span class="pl-pds">'</span></span>
1 3 11 13 21 23

$ <span class="pl-c"><span class="pl-c">#</span> compare values</span>
$ s=<span class="pl-s"><span class="pl-pds">'</span>23 756 -983 5<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", grep $_&lt;100, @F<span class="pl-pds">'</span></span>
23 -983 5

$ <span class="pl-c"><span class="pl-c">#</span> filters only those elements with successful substitution</span>
$ <span class="pl-c"><span class="pl-c">#</span> note that it would modify array elements as well</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", grep s/3/E/, @F<span class="pl-pds">'</span></span>
2E -98E</pre></div>
<ul>
<li>more examples</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> filtering column(s) based on header</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>@i = grep {$F[$_] eq "Name"} 0..$#F if $.==1;</span>
<span class="pl-s">              print @F[@i]<span class="pl-pds">'</span></span> marks.txt
Name
Raj
Joel
Moi
Surya
Tia
Om
Amy

$ cat split.txt
foo,1:2:5,baz
wry,4,look
free,3:8,oh
$ <span class="pl-c"><span class="pl-c">#</span> print line if more than one column has a digit</span>
$ perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print if (grep /\d/, @F) &gt; 1<span class="pl-pds">'</span></span> split.txt
foo,1:2:5,baz
free,3:8,oh</pre></div>
<ul>
<li>to get random element from array</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>65 23 756 -983 5<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[rand @F]<span class="pl-pds">'</span></span>
5
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[rand @F]<span class="pl-pds">'</span></span>
23
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[rand @F]<span class="pl-pds">'</span></span>
-983

$ <span class="pl-c"><span class="pl-c">#</span> in scalar context, size of array gets passed to rand</span>
$ <span class="pl-c"><span class="pl-c">#</span> rand actually returns a float</span>
$ <span class="pl-c"><span class="pl-c">#</span> which then gets converted to int index</span></pre></div>
<br>
<h4><a href="#sorting" aria-hidden="true" class="anchor" id="user-content-sorting"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-sorting"></a>Sorting</h4>
<ul>
<li>See <a href="https://perldoc.perl.org/functions/sort.html" rel="nofollow">perldoc - sort</a> for details</li>
<li><code>$a</code> and <code>$b</code> are special variables used for sorting, avoid using them as user defined variables</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> by default, sort does string comparison</span>
$ s=<span class="pl-s"><span class="pl-pds">'</span>foo baz v22 aimed<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", sort @F<span class="pl-pds">'</span></span>
aimed baz foo v22

$ <span class="pl-c"><span class="pl-c">#</span> same as default sort </span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", sort {$a cmp $b} @F<span class="pl-pds">'</span></span>
aimed baz foo v22
$ <span class="pl-c"><span class="pl-c">#</span> descending order, note how $a and $b are switched</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", sort {$b cmp $a} @F<span class="pl-pds">'</span></span>
v22 foo baz aimed

$ <span class="pl-c"><span class="pl-c">#</span> functions can be used for custom sorting</span>
$ <span class="pl-c"><span class="pl-c">#</span> lc lowercases string, so this sorts case insensitively</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", sort {lc $a cmp lc $b} @F<span class="pl-pds">'</span></span> poem.txt
are red, Roses
are blue, Violets
is Sugar sweet,
And are so you.</pre></div>
<ul>
<li>sorting characters within word</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foobar<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F -lane <span class="pl-s"><span class="pl-pds">'</span>print sort @F<span class="pl-pds">'</span></span>
abfoor

$ cat words.txt
bot
art
are
boat
toe
flee
reed

$ <span class="pl-c"><span class="pl-c">#</span> words with characters in ascending order</span>
$ perl -F -lane <span class="pl-s"><span class="pl-pds">'</span>print if (join "", sort @F) eq $_<span class="pl-pds">'</span></span> words.txt 
bot
art

$ <span class="pl-c"><span class="pl-c">#</span> words with characters in descending order</span>
$ perl -F -lane <span class="pl-s"><span class="pl-pds">'</span>print if (join "", sort {$b cmp $a} @F) eq $_<span class="pl-pds">'</span></span> words.txt
toe
reed</pre></div>
<ul>
<li>for numeric comparison, use <code>&lt;=&gt;</code> instead of <code>cmp</code></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>23 756 -983 5<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ",sort {$a &lt;=&gt; $b} @F<span class="pl-pds">'</span></span>
-983 5 23 756
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ",sort {$b &lt;=&gt; $a} @F<span class="pl-pds">'</span></span>
756 23 5 -983

$ <span class="pl-c"><span class="pl-c">#</span> sorting strings based on their length</span>
$ s=<span class="pl-s"><span class="pl-pds">'</span>floor bat to dubious four<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join ":",sort {length $a &lt;=&gt; length $b} @F<span class="pl-pds">'</span></span>
to:bat:four:floor:dubious</pre></div>
<ul>
<li>sorting based on header</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> need to get indexes of order required for header, then use it for all lines</span>
$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>@i = sort {$F[$a] cmp $F[$b]} 0..$#F if $.==1;</span>
<span class="pl-s">              print join "\t", @F[@i]<span class="pl-pds">'</span></span> marks.txt
Dept    Marks   Name
ECE     53      Raj
ECE     72      Joel
EEE     68      Moi
CSE     81      Surya
EEE     59      Tia
ECE     92      Om
CSE     67      Amy

$ perl -lane <span class="pl-s"><span class="pl-pds">'</span>@i = sort {$F[$b] cmp $F[$a]} 0..$#F if $.==1;</span>
<span class="pl-s">              print join "\t", @F[@i]<span class="pl-pds">'</span></span> marks.txt
Name    Marks   Dept
Raj     53      ECE
Joel    72      ECE
Moi     68      EEE
Surya   81      CSE
Tia     59      EEE
Om      92      ECE
Amy     67      CSE</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://perldoc.perl.org/perlfaq4.html#How-do-I-sort-a-hash-(optionally-by-value-instead-of-key)%3f" rel="nofollow">perldoc - How do I sort a hash (optionally by value instead of key)?</a></li>
<li><a href="https://stackoverflow.com/questions/10901084/how-to-sort-perl-hash-on-values-and-order-the-keys-correspondingly-in-two-array" rel="nofollow">stackoverflow - sort the keys of a hash by value</a></li>
</ul>
<br>
<h4><a href="#transforming" aria-hidden="true" class="anchor" id="user-content-transforming"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-transforming"></a>Transforming</h4>
<ul>
<li>shuffling list elements</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>23 756 -983 5<span class="pl-pds">'</span></span>
$ <span class="pl-c"><span class="pl-c">#</span> note that this doesn't change the input array</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -MList::Util=shuffle -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", shuffle @F<span class="pl-pds">'</span></span>
756 23 -983 5
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -MList::Util=shuffle -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", shuffle @F<span class="pl-pds">'</span></span>
5 756 23 -983

$ <span class="pl-c"><span class="pl-c">#</span> randomizing file contents</span>
$ perl -MList::Util=shuffle -e <span class="pl-s"><span class="pl-pds">'</span>print shuffle &lt;&gt;<span class="pl-pds">'</span></span> poem.txt
Sugar is sweet,
And so are you.
Violets are blue,
Roses are red,

$ <span class="pl-c"><span class="pl-c">#</span> or if shuffle order is known</span>
$ seq 5 <span class="pl-k">|</span> perl -e <span class="pl-s"><span class="pl-pds">'</span>@lines=&lt;&gt;; print @lines[3,1,0,2,4]<span class="pl-pds">'</span></span>
4
2
1
3
5</pre></div>
<ul>
<li>use <code>map</code> to transform every element</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>23 756 -983 5<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", map {$_*$_} @F<span class="pl-pds">'</span></span>
529 571536 966289 25
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join ",", map {"\"$_\""} @F<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a b c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join ",", map {uc "\"$_\""} @F<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>A<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>B<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>C<span class="pl-pds">"</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> changing the array itself</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@s=(4, 245, 12); map {$_*$_} @s; print join " ", @s<span class="pl-pds">'</span></span>
4 245 12
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@s=(4, 245, 12); map {$_ = $_*$_} @s; print join " ", @s<span class="pl-pds">'</span></span>
16 60025 144

$ <span class="pl-c"><span class="pl-c">#</span> ASCII int values for each character</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>AaBbCc<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", map ord, @F<span class="pl-pds">'</span></span>
65 97 66 98 67 99

$ s=<span class="pl-s"><span class="pl-pds">'</span>this is a sample sentence<span class="pl-pds">'</span></span>
$ <span class="pl-c"><span class="pl-c">#</span> shuffle each word, split here converts each element to character array</span>
$ <span class="pl-c"><span class="pl-c">#</span> join the characters after shuffling with empty string</span>
$ <span class="pl-c"><span class="pl-c">#</span> finally print each changed element with space as separator</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -MList::Util=shuffle -lane <span class="pl-s"><span class="pl-pds">'</span>$,=" ";</span>
<span class="pl-s">                    print map {join "", shuffle split//} @F;<span class="pl-pds">'</span></span>
tshi si a mleasp ncstneee</pre></div>
<ul>
<li>fun little unreadable script...</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat para.txt
Why cannot I go back to my ignorant days with wild imaginations and fantasies<span class="pl-k">?</span>
Perhaps the answer lies <span class="pl-k">in</span> not being able to adapt to my freedom.
Those little dreams, goal setting, anticipation of results, used to be my world.
All joy within the soul and less dependent on outside world.
But all these are absent <span class="pl-k">for</span> a long <span class="pl-k">time</span> now.
Hope I can wake those dreams all over again.

$ perl -MList::Util=shuffle -F<span class="pl-s"><span class="pl-pds">'</span>/([^a-zA-Z]+)/<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span></span>
<span class="pl-s">        print map {@c=split//; $#c&lt;3 || /[^a-zA-Z]/? $_ :</span>
<span class="pl-s">              join "",$c[0],(shuffle @c[1..$#c-1]),$c[-1]} @F;<span class="pl-pds">'</span></span> para.txt
Why coannt I go back to my inoagrnt dyas wtih wild imiaintangos and fatenasis<span class="pl-k">?</span>
Phearps the awsenr lies <span class="pl-k">in</span> not bieng albe to aadpt to my fedoerm.
Toshe llttie draems, goal stetnig, aaioiciptntn of rtuelss, uesd to be my wrlod.
All joy witihn the suol and less dnenepedt on oiduste world.
But all tsehe are abenst <span class="pl-k">for</span> a lnog tmie now.
Hpoe I can wkae toshe daemrs all over aiagn.</pre></div>
<ul>
<li>reverse array</li>
<li>See also <a href="https://stackoverflow.com/questions/45571828/execute-bash-command-inside-awk-and-print-command-output/45572038#45572038" rel="nofollow">stackoverflow - apply tr and reverse to particular column</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ s=<span class="pl-s"><span class="pl-pds">'</span>23 756 -983 5<span class="pl-pds">'</span></span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$s</span><span class="pl-pds">"</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print join " ", reverse @F<span class="pl-pds">'</span></span>
5 -983 756 23

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foobar<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print reverse split//<span class="pl-pds">'</span></span>
raboof
$ <span class="pl-c"><span class="pl-c">#</span> can also use scalar context instead of using split</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foobar<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>$x=reverse; print $x<span class="pl-pds">'</span></span>
raboof
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>foobar<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print scalar reverse<span class="pl-pds">'</span></span>
raboof</pre></div>
<br>
<h2><a href="#miscellaneous" aria-hidden="true" class="anchor" id="user-content-miscellaneous"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-miscellaneous"></a>Miscellaneous</h2>
<br>
<h4><a href="#split" aria-hidden="true" class="anchor" id="user-content-split"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-split"></a>split</h4>
<ul>
<li>the <code>-a</code> command line option uses <code>split</code> and automatically saves the results in <code>@F</code> array</li>
<li>default separator is <code>\s+</code></li>
<li>by default acts on <code>$_</code></li>
<li>and by default all splits are performed</li>
<li>See also <a href="https://perldoc.perl.org/functions/split.html" rel="nofollow">perldoc - split function</a></li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[2]<span class="pl-pds">'</span></span>
b
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x=split; print $x[2]<span class="pl-pds">'</span></span>
b
$ <span class="pl-c"><span class="pl-c">#</span> temp variable can be avoided by using list context</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join ":", (split)[2,-1]<span class="pl-pds">'</span></span>
b:c

$ <span class="pl-c"><span class="pl-c">#</span> using digits as separator</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x=split /\d+/; print ":$x[1]:"<span class="pl-pds">'</span></span>
<span class="pl-c1">:</span> b <span class="pl-c1">:</span>

$ <span class="pl-c"><span class="pl-c">#</span> specifying maximum number of splits</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x=split /\h+/,$_,2; print "$x[0]:$x[1]:"<span class="pl-pds">'</span></span>
a:1 b 2 c:
$ <span class="pl-c"><span class="pl-c">#</span> specifying limit using -F option</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>/\h+/,$_,2<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print "$F[0]:$F[1]:"<span class="pl-pds">'</span></span>
a:1 b 2 c:</pre></div>
<ul>
<li>by default, trailing empty fields are stripped</li>
<li>specify a negative value to preserve trailing empty fields</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>:123::<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print scalar split /:/<span class="pl-pds">'</span></span>
2
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>:123::<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print scalar split /:/,$_,-1<span class="pl-pds">'</span></span>
4

$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>:123::<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F: -lane <span class="pl-s"><span class="pl-pds">'</span>print scalar @F<span class="pl-pds">'</span></span>
2
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>:123::<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>/:/,$_,-1<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print scalar @F<span class="pl-pds">'</span></span>
4</pre></div>
<ul>
<li>to save the separators as well, use capture groups</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x=split /(\d+)/; print "$x[1],$x[3]"<span class="pl-pds">'</span></span>
1,2
$ <span class="pl-c"><span class="pl-c">#</span> or, without the temp variable</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print join ",", (split /(\d+)/)[1,3]<span class="pl-pds">'</span></span>
1,2

$ <span class="pl-c"><span class="pl-c">#</span> same can be done for -F option</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>(\d+)<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print "$F[1],$F[3]"<span class="pl-pds">'</span></span>
1,2</pre></div>
<ul>
<li>single line to multiple line by splitting a column</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ cat split.txt
foo,1:2:5,baz
wry,4,look
free,3:8,oh

$ perl -F, -ane <span class="pl-s"><span class="pl-pds">'</span>print join ",", $F[0],$_,$F[2] for split /:/,$F[1]<span class="pl-pds">'</span></span> split.txt
foo,1,baz
foo,2,baz
foo,5,baz
wry,4,look
free,3,oh
free,8,oh</pre></div>
<ul>
<li>weird behavior if literal space character is used with <code>-F</code> option</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> only one element in @F array</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>/b /<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>

$ <span class="pl-c"><span class="pl-c">#</span> space not being used by separator</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>b <span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
 2 c
$ <span class="pl-c"><span class="pl-c">#</span> correct behavior</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>b\x20<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
2 c

$ <span class="pl-c"><span class="pl-c">#</span> errors out if space used inside character class</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F<span class="pl-s"><span class="pl-pds">'</span>/b[ ]/<span class="pl-pds">'</span></span> -lane <span class="pl-s"><span class="pl-pds">'</span>print $F[1]<span class="pl-pds">'</span></span>
Unmatched [ <span class="pl-k">in</span> regex<span class="pl-k">;</span> marked by <span class="pl-k">&lt;</span>-- HERE <span class="pl-k">in</span> m//b[ <span class="pl-k">&lt;</span>-- HERE /.
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a 1 b 2 c<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x=split /b[ ]/; print $x[1]<span class="pl-pds">'</span></span>
2 c</pre></div>
<br>
<h4><a href="#fixed-width-processing" aria-hidden="true" class="anchor" id="user-content-fixed-width-processing"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-fixed-width-processing"></a>Fixed width processing</h4>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> here 'a' indicates arbitrary binary data</span>
$ <span class="pl-c"><span class="pl-c">#</span> the number that follows indicates length</span>
$ <span class="pl-c"><span class="pl-c">#</span> the 'x' indicates characters to ignore, use length after 'x' if needed</span>
$ <span class="pl-c"><span class="pl-c">#</span> and there are many other formats, see perldoc for details</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>b 123 good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x = unpack("a1xa3xa4", $_); print $x[0]<span class="pl-pds">'</span></span>
b
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>b 123 good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x = unpack("a1xa3xa4", $_); print $x[1]<span class="pl-pds">'</span></span>
123
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>b 123 good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>@x = unpack("a1xa3xa4", $_); print $x[2]<span class="pl-pds">'</span></span>
good

$ <span class="pl-c"><span class="pl-c">#</span> unpack not always needed, can simply capture characters needed</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>b 123 good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print /.{2}(.{3})/<span class="pl-pds">'</span></span>
123
$ <span class="pl-c"><span class="pl-c">#</span> or use substr to specify offset (starts from 0) and length</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>b 123 good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lne <span class="pl-s"><span class="pl-pds">'</span>print substr $_, 6, 4<span class="pl-pds">'</span></span>
good

$ <span class="pl-c"><span class="pl-c">#</span> substr can also be used for replacing</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>b 123 good<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -lpe <span class="pl-s"><span class="pl-pds">'</span>substr $_, 2, 3, "gleam"<span class="pl-pds">'</span></span>
b gleam good</pre></div>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="https://perldoc.perl.org/perlpacktut.html" rel="nofollow">perldoc - tutorial on pack and unpack</a></li>
<li><a href="https://perldoc.perl.org/functions/substr.html" rel="nofollow">perldoc - substr</a></li>
<li><a href="https://stackoverflow.com/questions/1494611/how-can-i-extract-columns-from-a-fixed-width-format-in-perl" rel="nofollow">stackoverflow - extract columns from a fixed-width format</a></li>
<li><a href="https://stackoverflow.com/questions/4911044/parse-fixed-width-files" rel="nofollow">stackoverflow - build fixed-width template from header</a></li>
<li><a href="https://stackoverflow.com/questions/43734981/display-column-from-empty-column-delimited-space-in-bash" rel="nofollow">stackoverflow - convert fixed-width to delimited format</a></li>
</ul>
<br>
<h4><a href="#string-and-file-replication" aria-hidden="true" class="anchor" id="user-content-string-and-file-replication"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-string-and-file-replication"></a>String and file replication</h4>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> replicate each line</span>
$ seq 2 <span class="pl-k">|</span> perl -ne <span class="pl-s"><span class="pl-pds">'</span>print $_ x 2<span class="pl-pds">'</span></span>
1
1
2
2

$ <span class="pl-c"><span class="pl-c">#</span> replicate a string</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>print "abc" x 5<span class="pl-pds">'</span></span>
abcabcabcabcabc

$ <span class="pl-c"><span class="pl-c">#</span> works for lists too</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@x = (3, 2, 1) x 2; print join " ",@x<span class="pl-pds">'</span></span>
3 2 1 3 2 1

$ <span class="pl-c"><span class="pl-c">#</span> replicating file</span>
$ wc -c poem.txt
65 poem.txt
$ perl -0777 -ne <span class="pl-s"><span class="pl-pds">'</span>print $_ x 100<span class="pl-pds">'</span></span> poem.txt <span class="pl-k">|</span> wc -c
6500</pre></div>
<ul>
<li>the <a href="https://perldoc.perl.org/functions/glob.html" rel="nofollow">perldoc - glob</a> function can be hacked to generate combinations of strings</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c"><span class="pl-c">#</span> typical use case</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: echo *.log</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@x=glob q/*.log/; print "@x"<span class="pl-pds">'</span></span>
report.log
$ <span class="pl-c"><span class="pl-c">#</span> same as: echo *.{log,pl}</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@x=glob q/*.{log,pl}/; print "@x"<span class="pl-pds">'</span></span>
report.log code.pl sub_sq.pl

$ <span class="pl-c"><span class="pl-c">#</span> hacking</span>
$ <span class="pl-c"><span class="pl-c">#</span> same as: echo {1,3}{a,b}</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@x=glob q/{1,3}{a,b}/; print "@x"<span class="pl-pds">'</span></span>
1a 1b 3a 3b
$ <span class="pl-c"><span class="pl-c">#</span> same as: echo {1,3}{1,3}{1,3}</span>
$ perl -le <span class="pl-s"><span class="pl-pds">'</span>@x=glob "{1,3}" x 3; print "@x"<span class="pl-pds">'</span></span>
111 113 131 133 311 313 331 333</pre></div>
<br>
<h4><a href="#executing-external-commands" aria-hidden="true" class="anchor" id="user-content-executing-external-commands"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-executing-external-commands"></a>Executing external commands</h4>
<ul>
<li>External commands can be issued using <code>system</code> function</li>
<li>Output would be as usual on <code>stdout</code> unless redirected while calling the command</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -e <span class="pl-s"><span class="pl-pds">'</span>system("echo Hello World")<span class="pl-pds">'</span></span>
Hello World
$ <span class="pl-c"><span class="pl-c">#</span> use q operator to avoid interpolation</span>
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>system q/echo $HOME/<span class="pl-pds">'</span></span>
/home/learnbyexample

$ perl -e <span class="pl-s"><span class="pl-pds">'</span>system q/wc poem.txt/<span class="pl-pds">'</span></span>
 4 13 65 poem.txt

$ perl -e <span class="pl-s"><span class="pl-pds">'</span>system q/seq 10 | paste -sd, &gt; out.txt/<span class="pl-pds">'</span></span>
$ cat out.txt
1,2,3,4,5,6,7,8,9,10

$ cat f2
I bought two bananas and three mangoes
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>f1,f2,odd.txt<span class="pl-pds">'</span></span> <span class="pl-k">|</span> perl -F, -lane <span class="pl-s"><span class="pl-pds">'</span>system "cat $F[1]"<span class="pl-pds">'</span></span>
I bought two bananas and three mangoes</pre></div>
<ul>
<li>return value of <code>system</code> will have exit status information or <code>$?</code> can be used</li>
<li>see <a href="https://perldoc.perl.org/functions/system.html" rel="nofollow">perldoc - system</a> for details</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -le <span class="pl-s"><span class="pl-pds">'</span>system q/ls poem.txt/; print "exit status: $?"<span class="pl-pds">'</span></span>
poem.txt
<span class="pl-c1">exit</span> status: 0

$ perl -le <span class="pl-s"><span class="pl-pds">'</span>system q/ls xyz.txt/; print "exit status: $?"<span class="pl-pds">'</span></span>
ls: cannot access <span class="pl-s"><span class="pl-pds">'</span>xyz.txt<span class="pl-pds">'</span></span>: No such file or directory
<span class="pl-c1">exit</span> status: 512</pre></div>
<ul>
<li>to save result of external command, use backticks or <code>qx</code> operator</li>
<li>newline gets saved too, use <code>chomp</code> if needed</li>
</ul>
<div class="highlight highlight-source-shell"><pre>$ perl -e <span class="pl-s"><span class="pl-pds">'</span>$lines = `wc -l &lt; poem.txt`; print $lines<span class="pl-pds">'</span></span>
4
$ perl -e <span class="pl-s"><span class="pl-pds">'</span>$nums = qx/seq 3/; print $nums<span class="pl-pds">'</span></span>
1
2
3</pre></div>
<ul>
<li>See also <a href="https://stackoverflow.com/questions/799968/whats-the-difference-between-perls-backticks-system-and-exec" rel="nofollow">stackoverflow - difference between backticks, system, exec and open</a></li>
</ul>
<br>
<h2><a href="#further-reading" aria-hidden="true" class="anchor" id="user-content-further-reading"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a name="user-content-further-reading"></a>Further Reading</h2>
<ul>
<li>Manual and related
<ul>
<li><a href="https://perldoc.perl.org/index-overview.html" rel="nofollow">perldoc - overview</a></li>
<li><a href="https://perldoc.perl.org/index-faq.html" rel="nofollow">perldoc - faqs</a></li>
<li><a href="https://perldoc.perl.org/index-tutorials.html" rel="nofollow">perldoc - tutorials</a></li>
<li><a href="https://perldoc.perl.org/index-functions.html" rel="nofollow">perldoc - functions</a></li>
<li><a href="https://perldoc.perl.org/perlvar.html" rel="nofollow">perldoc - special variables</a></li>
<li><a href="https://perldoc.perl.org/perlretut.html" rel="nofollow">perldoc - perlretut</a></li>
</ul>
</li>
<li>Tutorials and Q&amp;A
<ul>
<li><a href="http://www.catonmat.net/series/perl-one-liners-explained" rel="nofollow">Perl one-liners explained</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/perl?sort=votes&amp;pageSize=15" rel="nofollow">perl Q&amp;A on stackoverflow</a></li>
<li><a href="https://stackoverflow.com/questions/22937618/reference-what-does-this-regex-mean" rel="nofollow">regex FAQ on SO</a></li>
<li><a href="https://regexone.com/" rel="nofollow">regexone</a> - interative tutorial</li>
<li><a href="https://regexcrossword.com/" rel="nofollow">regexcrossword</a> - practice by solving crosswords, read 'How to play' section before you start</li>
</ul>
</li>
<li>Alternatives
<ul>
<li><a href="http://bioperl.org/howtos/index.html" rel="nofollow">bioperl</a></li>
<li><a href="https://www.ruby-lang.org/en/" rel="nofollow">ruby</a></li>
<li><a href="https://unix.stackexchange.com/questions/303044/when-to-use-grep-less-awk-sed" rel="nofollow">unix.stackexchange - When to use grep, sed, awk, perl, etc</a></li>
</ul>
</li>
</ul>
</article>
  </div>

  </div>

  <button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="d-none">Jump to Line</button>
  <div id="jump-to-line" style="display:none">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
      <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
      <button type="submit" class="btn">Go</button>
</form>  </div>


  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between py-6 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2018 <span title="0.09766s from unicorn-1513531007-w4w3v">GitHub</span>, Inc.</li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-terms-of-service/" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li class="mr-3"><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-security/" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>

    <a href="https://github.com" aria-label="Homepage" class="footer-octicon" title="GitHub">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" version="1.1" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
    <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
    You can't perform that action at this time.
  </div>


    
    <script crossorigin="anonymous" integrity="sha512-MO2ZtIEZrtDlHQRpl/db39VEpjw/+MfQjkgZhl52kxNrXqYwEKwe0oEa/IRuvPRN5v9UUrznRAoA2AgP8s/OIw==" src="https://assets-cdn.github.com/assets/frameworks-30ed99b48119.js" type="application/javascript"></script>
    
    <script async="async" crossorigin="anonymous" integrity="sha512-3v5SHiwYMWdvL7PX+vt1sdYGlTxotrqWMK4cDc0fupBnGALt0VvTvr2KxIS+qkFhFuCZw+KsSmEIHvaxID77BA==" src="https://assets-cdn.github.com/assets/github-defe521e2c18.js" type="application/javascript"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
  </div>
</div>

  

  </body>
</html>

